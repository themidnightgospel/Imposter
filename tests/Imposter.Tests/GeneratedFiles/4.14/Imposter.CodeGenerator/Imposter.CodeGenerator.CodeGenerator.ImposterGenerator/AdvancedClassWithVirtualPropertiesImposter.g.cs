// <auto-generated />
#nullable enable
#pragma warning disable
using global::System;
using global::System.Linq;
using global::System.Collections.Generic;
using global::System.Threading.Tasks;
using global::System.Diagnostics;
using global::System.Runtime.CompilerServices;
using global::Imposter.Abstractions;
using global::System.Collections.Concurrent;
using global::Imposter.Tests.Features.PropertyImposter;

namespace Imposter.Tests.Features.PropertyImposter
{
    [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
    public sealed class AdvancedClassWithVirtualPropertiesImposter : global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties>
    {
        private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
        private ImposterTargetInstance _imposterInstance;
        global::Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties>.Instance()
        {
            return _imposterInstance;
        }

        public IGetterOnlyVirtualPropertyPropertyBuilder GetterOnlyVirtualProperty => _GetterOnlyVirtualPropertyPropertyBuilderField;

        private readonly GetterOnlyVirtualPropertyPropertyBuilder _GetterOnlyVirtualPropertyPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder Returns(string value);
            IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder Returns(global::System.Func<string> valueGenerator);
            IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder Throws(global::System.Exception exception);
            IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterCallbackBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder Callback(global::System.Action callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder : IGetterOnlyVirtualPropertyPropertyGetterCallbackBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder : IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder, IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterBuilder : IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder, IGetterOnlyVirtualPropertyPropertyGetterCallbackBuilder, IGetterOnlyVirtualPropertyPropertyGetterVerifier, IGetterOnlyVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IGetterOnlyVirtualPropertyPropertyBuilder
        {
            IGetterOnlyVirtualPropertyPropertyGetterBuilder Getter();
            IGetterOnlyVirtualPropertyPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class GetterOnlyVirtualPropertyPropertyBuilder : IGetterOnlyVirtualPropertyPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal GetterImposterBuilder _getterImposterBuilder;
            internal GetterOnlyVirtualPropertyPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _getterImposterBuilder = new GetterImposterBuilder(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties.GetterOnlyVirtualProperty");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal volatile bool IsOn = true;
                internal volatile bool HasValueSet = false;
                internal string BackingField = default !;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class GetterImposterBuilder : IGetterOnlyVirtualPropertyPropertyGetterBuilder, IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder, IGetterOnlyVirtualPropertyPropertyGetterUseBaseImplementationBuilder
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action>();
                private volatile global::System.Func<global::System.Func<string>?, string> _lastReturnValue = _ => default !;
                private int _invocationCount;
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposterBuilder(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                private void AddReturnValue(global::System.Func<global::System.Func<string>?, string> valueGenerator)
                {
                    _defaultPropertyBehaviour.IsOn = false;
                    _returnValues.Enqueue(valueGenerator);
                    _hasConfiguredReturn = true;
                }

                IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder.Returns(string value)
                {
                    AddReturnValue((_) => value);
                    return this;
                }

                IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder.Returns(global::System.Func<string> valueGenerator)
                {
                    AddReturnValue((_) => valueGenerator());
                    return this;
                }

                IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder.Throws(global::System.Exception exception)
                {
                    AddReturnValue((_) => throw exception);
                    return this;
                }

                IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder IGetterOnlyVirtualPropertyPropertyGetterOutcomeBuilder.Throws<TException>()
                {
                    AddReturnValue((_) => throw new TException());
                    return this;
                }

                IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder IGetterOnlyVirtualPropertyPropertyGetterCallbackBuilder.Callback(global::System.Action callback)
                {
                    _callbacks.Enqueue(callback);
                    return this;
                }

                void IGetterOnlyVirtualPropertyPropertyGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    if (!count.Matches(_invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, _invocationCount);
                }

                IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder IGetterOnlyVirtualPropertyPropertyGetterContinuationBuilder.Then()
                {
                    return this;
                }

                IGetterOnlyVirtualPropertyPropertyGetterUseBaseImplementationBuilder IGetterOnlyVirtualPropertyPropertyGetterBuilder.Then()
                {
                    return this;
                }

                internal void EnableBaseImplementation()
                {
                    AddReturnValue((global::System.Func<string>? baseImplementation) =>
                    {
                        if (baseImplementation != null)
                            return baseImplementation();
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    });
                }

                IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder IGetterOnlyVirtualPropertyPropertyGetterUseBaseImplementationBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder IGetterOnlyVirtualPropertyPropertyGetterFluentBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                internal string Get(global::System.Func<string>? baseImplementation = null)
                {
                    EnsureGetterConfigured();
                    global::System.Threading.Interlocked.Increment(ref _invocationCount);
                    foreach (var getterCallback in _callbacks)
                    {
                        getterCallback();
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        if (((_invocationCount == 1) && (baseImplementation != null)) && !_defaultPropertyBehaviour.HasValueSet)
                        {
                            _defaultPropertyBehaviour.BackingField = baseImplementation();
                        }

                        return _defaultPropertyBehaviour.BackingField;
                    }

                    var nextReturnValue = _lastReturnValue;
                    if (_returnValues.TryDequeue(out var returnValue) && (returnValue != null))
                    {
                        nextReturnValue = returnValue;
                        _lastReturnValue = returnValue;
                    }

                    return nextReturnValue(baseImplementation);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredReturn)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                }
            }

            IGetterOnlyVirtualPropertyPropertyGetterBuilder IGetterOnlyVirtualPropertyPropertyBuilder.Getter()
            {
                return _getterImposterBuilder;
            }

            IGetterOnlyVirtualPropertyPropertyBuilder IGetterOnlyVirtualPropertyPropertyBuilder.UseBaseImplementation()
            {
                _getterImposterBuilder.EnableBaseImplementation();
                return this;
            }
        }

        public ISetterOnlyVirtualPropertyPropertyBuilder SetterOnlyVirtualProperty => _SetterOnlyVirtualPropertyPropertyBuilderField;

        private readonly SetterOnlyVirtualPropertyPropertyBuilder _SetterOnlyVirtualPropertyPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertySetterCallbackBuilder
        {
            ISetterOnlyVirtualPropertyPropertySetterContinuationBuilder Callback(global::System.Action<string> callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertySetterContinuationBuilder : ISetterOnlyVirtualPropertyPropertySetterCallbackBuilder
        {
            ISetterOnlyVirtualPropertyPropertySetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertySetterFluentBuilder : ISetterOnlyVirtualPropertyPropertySetterCallbackBuilder, ISetterOnlyVirtualPropertyPropertySetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertySetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertySetterBuilder : ISetterOnlyVirtualPropertyPropertySetterCallbackBuilder, ISetterOnlyVirtualPropertyPropertySetterVerifier, ISetterOnlyVirtualPropertyPropertySetterUseBaseImplementationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertySetterUseBaseImplementationBuilder : ISetterOnlyVirtualPropertyPropertySetterFluentBuilder
        {
            ISetterOnlyVirtualPropertyPropertySetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISetterOnlyVirtualPropertyPropertyBuilder
        {
            ISetterOnlyVirtualPropertyPropertySetterBuilder Setter(global::Imposter.Abstractions.Arg<string> criteria);
            ISetterOnlyVirtualPropertyPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class SetterOnlyVirtualPropertyPropertyBuilder : ISetterOnlyVirtualPropertyPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal SetterImposter _setterImposter;
            internal SetterOnlyVirtualPropertyPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _setterImposter = new SetterImposter(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties.SetterOnlyVirtualProperty");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal volatile bool IsOn = true;
                internal volatile bool HasValueSet = false;
                internal string BackingField = default !;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class SetterImposter
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>>();
                private readonly global::System.Collections.Concurrent.ConcurrentStack<string> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<string>();
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredSetter;
                private bool _useBaseImplementation;
                internal SetterImposter(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                internal void Callback(global::Imposter.Abstractions.Arg<string> criteria, global::System.Action<string> callback)
                {
                    _callbacks.Enqueue(new global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>(criteria, callback));
                }

                void Called(global::Imposter.Abstractions.Arg<string> criteria, global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                    {
                        var performedInvocations = new global::System.Collections.Generic.List<string>();
                        foreach (var value in _invocationHistory)
                        {
                            performedInvocations.Add("set " + _propertyDisplayName + " = " + FormatValue(value));
                        }

                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount, string.Join(Environment.NewLine, performedInvocations));
                    }
                }

                internal void UseBaseImplementation()
                {
                    _hasConfiguredSetter = true;
                    _useBaseImplementation = true;
                }

                internal void Set(string value, global::System.Action<string>? baseImplementation = null)
                {
                    EnsureSetterConfigured();
                    _invocationHistory.Push(value);
                    foreach (var(criteria, setterCallback)in _callbacks)
                    {
                        if (criteria.Matches(value))
                            setterCallback(value);
                    }

                    if (_useBaseImplementation)
                    {
                        if (baseImplementation != null)
                        {
                            baseImplementation(value);
                            return;
                        }
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        _defaultPropertyBehaviour.BackingField = value;
                        _defaultPropertyBehaviour.HasValueSet = true;
                    }
                }

                private void EnsureSetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredSetter)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                }

                internal void MarkConfigured()
                {
                    _hasConfiguredSetter = true;
                }

                private static string FormatValue(object? value)
                {
                    return "<" + (value?.ToString() ?? "null") + ">";
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : ISetterOnlyVirtualPropertyPropertySetterBuilder, ISetterOnlyVirtualPropertyPropertySetterFluentBuilder, ISetterOnlyVirtualPropertyPropertySetterUseBaseImplementationBuilder
                {
                    private readonly SetterImposter _setterImposter;
                    private readonly global::Imposter.Abstractions.Arg<string> _criteria;
                    internal Builder(SetterImposter _setterImposter, global::Imposter.Abstractions.Arg<string> _criteria)
                    {
                        this._setterImposter = _setterImposter;
                        this._criteria = _criteria;
                    }

                    ISetterOnlyVirtualPropertyPropertySetterContinuationBuilder ISetterOnlyVirtualPropertyPropertySetterCallbackBuilder.Callback(global::System.Action<string> callback)
                    {
                        _setterImposter.Callback(_criteria, callback);
                        return this;
                    }

                    void ISetterOnlyVirtualPropertyPropertySetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _setterImposter.Called(_criteria, count);
                    }

                    ISetterOnlyVirtualPropertyPropertySetterUseBaseImplementationBuilder ISetterOnlyVirtualPropertyPropertySetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    ISetterOnlyVirtualPropertyPropertySetterFluentBuilder ISetterOnlyVirtualPropertyPropertySetterUseBaseImplementationBuilder.UseBaseImplementation()
                    {
                        _setterImposter.UseBaseImplementation();
                        return this;
                    }
                }
            }

            ISetterOnlyVirtualPropertyPropertySetterBuilder ISetterOnlyVirtualPropertyPropertyBuilder.Setter(global::Imposter.Abstractions.Arg<string> criteria)
            {
                _setterImposter.MarkConfigured();
                return new SetterImposter.Builder(_setterImposter, criteria);
            }

            ISetterOnlyVirtualPropertyPropertyBuilder ISetterOnlyVirtualPropertyPropertyBuilder.UseBaseImplementation()
            {
                _setterImposter.UseBaseImplementation();
                return this;
            }
        }

        public IThrowingGetterVirtualPropertyPropertyBuilder ThrowingGetterVirtualProperty => _ThrowingGetterVirtualPropertyPropertyBuilderField;

        private readonly ThrowingGetterVirtualPropertyPropertyBuilder _ThrowingGetterVirtualPropertyPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder Returns(string value);
            IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder Returns(global::System.Func<string> valueGenerator);
            IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder Throws(global::System.Exception exception);
            IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterCallbackBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder Callback(global::System.Action callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder : IThrowingGetterVirtualPropertyPropertyGetterCallbackBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder : IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder, IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterBuilder : IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder, IThrowingGetterVirtualPropertyPropertyGetterCallbackBuilder, IThrowingGetterVirtualPropertyPropertyGetterVerifier, IThrowingGetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingGetterVirtualPropertyPropertyBuilder
        {
            IThrowingGetterVirtualPropertyPropertyGetterBuilder Getter();
            IThrowingGetterVirtualPropertyPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ThrowingGetterVirtualPropertyPropertyBuilder : IThrowingGetterVirtualPropertyPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal GetterImposterBuilder _getterImposterBuilder;
            internal ThrowingGetterVirtualPropertyPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _getterImposterBuilder = new GetterImposterBuilder(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties.ThrowingGetterVirtualProperty");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal volatile bool IsOn = true;
                internal volatile bool HasValueSet = false;
                internal string BackingField = default !;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class GetterImposterBuilder : IThrowingGetterVirtualPropertyPropertyGetterBuilder, IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder, IThrowingGetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action>();
                private volatile global::System.Func<global::System.Func<string>?, string> _lastReturnValue = _ => default !;
                private int _invocationCount;
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposterBuilder(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                private void AddReturnValue(global::System.Func<global::System.Func<string>?, string> valueGenerator)
                {
                    _defaultPropertyBehaviour.IsOn = false;
                    _returnValues.Enqueue(valueGenerator);
                    _hasConfiguredReturn = true;
                }

                IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder.Returns(string value)
                {
                    AddReturnValue((_) => value);
                    return this;
                }

                IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder.Returns(global::System.Func<string> valueGenerator)
                {
                    AddReturnValue((_) => valueGenerator());
                    return this;
                }

                IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder.Throws(global::System.Exception exception)
                {
                    AddReturnValue((_) => throw exception);
                    return this;
                }

                IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingGetterVirtualPropertyPropertyGetterOutcomeBuilder.Throws<TException>()
                {
                    AddReturnValue((_) => throw new TException());
                    return this;
                }

                IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingGetterVirtualPropertyPropertyGetterCallbackBuilder.Callback(global::System.Action callback)
                {
                    _callbacks.Enqueue(callback);
                    return this;
                }

                void IThrowingGetterVirtualPropertyPropertyGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    if (!count.Matches(_invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, _invocationCount);
                }

                IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder IThrowingGetterVirtualPropertyPropertyGetterContinuationBuilder.Then()
                {
                    return this;
                }

                IThrowingGetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder IThrowingGetterVirtualPropertyPropertyGetterBuilder.Then()
                {
                    return this;
                }

                internal void EnableBaseImplementation()
                {
                    AddReturnValue((global::System.Func<string>? baseImplementation) =>
                    {
                        if (baseImplementation != null)
                            return baseImplementation();
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    });
                }

                IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder IThrowingGetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder IThrowingGetterVirtualPropertyPropertyGetterFluentBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                internal string Get(global::System.Func<string>? baseImplementation = null)
                {
                    EnsureGetterConfigured();
                    global::System.Threading.Interlocked.Increment(ref _invocationCount);
                    foreach (var getterCallback in _callbacks)
                    {
                        getterCallback();
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        if (((_invocationCount == 1) && (baseImplementation != null)) && !_defaultPropertyBehaviour.HasValueSet)
                        {
                            _defaultPropertyBehaviour.BackingField = baseImplementation();
                        }

                        return _defaultPropertyBehaviour.BackingField;
                    }

                    var nextReturnValue = _lastReturnValue;
                    if (_returnValues.TryDequeue(out var returnValue) && (returnValue != null))
                    {
                        nextReturnValue = returnValue;
                        _lastReturnValue = returnValue;
                    }

                    return nextReturnValue(baseImplementation);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredReturn)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                }
            }

            IThrowingGetterVirtualPropertyPropertyGetterBuilder IThrowingGetterVirtualPropertyPropertyBuilder.Getter()
            {
                return _getterImposterBuilder;
            }

            IThrowingGetterVirtualPropertyPropertyBuilder IThrowingGetterVirtualPropertyPropertyBuilder.UseBaseImplementation()
            {
                _getterImposterBuilder.EnableBaseImplementation();
                return this;
            }
        }

        public IThrowingSetterVirtualPropertyPropertyBuilder ThrowingSetterVirtualProperty => _ThrowingSetterVirtualPropertyPropertyBuilderField;

        private readonly ThrowingSetterVirtualPropertyPropertyBuilder _ThrowingSetterVirtualPropertyPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder Returns(string value);
            IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder Returns(global::System.Func<string> valueGenerator);
            IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder Throws(global::System.Exception exception);
            IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterCallbackBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder Callback(global::System.Action callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder : IThrowingSetterVirtualPropertyPropertyGetterCallbackBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder : IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder, IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterBuilder : IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder, IThrowingSetterVirtualPropertyPropertyGetterCallbackBuilder, IThrowingSetterVirtualPropertyPropertyGetterVerifier, IThrowingSetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertySetterCallbackBuilder
        {
            IThrowingSetterVirtualPropertyPropertySetterContinuationBuilder Callback(global::System.Action<string> callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertySetterContinuationBuilder : IThrowingSetterVirtualPropertyPropertySetterCallbackBuilder
        {
            IThrowingSetterVirtualPropertyPropertySetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertySetterFluentBuilder : IThrowingSetterVirtualPropertyPropertySetterCallbackBuilder, IThrowingSetterVirtualPropertyPropertySetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertySetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertySetterBuilder : IThrowingSetterVirtualPropertyPropertySetterCallbackBuilder, IThrowingSetterVirtualPropertyPropertySetterVerifier, IThrowingSetterVirtualPropertyPropertySetterUseBaseImplementationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertySetterUseBaseImplementationBuilder : IThrowingSetterVirtualPropertyPropertySetterFluentBuilder
        {
            IThrowingSetterVirtualPropertyPropertySetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IThrowingSetterVirtualPropertyPropertyBuilder
        {
            IThrowingSetterVirtualPropertyPropertyGetterBuilder Getter();
            IThrowingSetterVirtualPropertyPropertySetterBuilder Setter(global::Imposter.Abstractions.Arg<string> criteria);
            IThrowingSetterVirtualPropertyPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ThrowingSetterVirtualPropertyPropertyBuilder : IThrowingSetterVirtualPropertyPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal SetterImposter _setterImposter;
            internal GetterImposterBuilder _getterImposterBuilder;
            internal ThrowingSetterVirtualPropertyPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _getterImposterBuilder = new GetterImposterBuilder(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties.ThrowingSetterVirtualProperty");
                _setterImposter = new SetterImposter(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties.ThrowingSetterVirtualProperty");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal volatile bool IsOn = true;
                internal volatile bool HasValueSet = false;
                internal string BackingField = default !;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class GetterImposterBuilder : IThrowingSetterVirtualPropertyPropertyGetterBuilder, IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder, IThrowingSetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action>();
                private volatile global::System.Func<global::System.Func<string>?, string> _lastReturnValue = _ => default !;
                private int _invocationCount;
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposterBuilder(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                private void AddReturnValue(global::System.Func<global::System.Func<string>?, string> valueGenerator)
                {
                    _defaultPropertyBehaviour.IsOn = false;
                    _returnValues.Enqueue(valueGenerator);
                    _hasConfiguredReturn = true;
                }

                IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder.Returns(string value)
                {
                    AddReturnValue((_) => value);
                    return this;
                }

                IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder.Returns(global::System.Func<string> valueGenerator)
                {
                    AddReturnValue((_) => valueGenerator());
                    return this;
                }

                IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder.Throws(global::System.Exception exception)
                {
                    AddReturnValue((_) => throw exception);
                    return this;
                }

                IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingSetterVirtualPropertyPropertyGetterOutcomeBuilder.Throws<TException>()
                {
                    AddReturnValue((_) => throw new TException());
                    return this;
                }

                IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder IThrowingSetterVirtualPropertyPropertyGetterCallbackBuilder.Callback(global::System.Action callback)
                {
                    _callbacks.Enqueue(callback);
                    return this;
                }

                void IThrowingSetterVirtualPropertyPropertyGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    if (!count.Matches(_invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, _invocationCount);
                }

                IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder IThrowingSetterVirtualPropertyPropertyGetterContinuationBuilder.Then()
                {
                    return this;
                }

                IThrowingSetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder IThrowingSetterVirtualPropertyPropertyGetterBuilder.Then()
                {
                    return this;
                }

                internal void EnableBaseImplementation()
                {
                    AddReturnValue((global::System.Func<string>? baseImplementation) =>
                    {
                        if (baseImplementation != null)
                            return baseImplementation();
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    });
                }

                IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder IThrowingSetterVirtualPropertyPropertyGetterUseBaseImplementationBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder IThrowingSetterVirtualPropertyPropertyGetterFluentBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                internal string Get(global::System.Func<string>? baseImplementation = null)
                {
                    EnsureGetterConfigured();
                    global::System.Threading.Interlocked.Increment(ref _invocationCount);
                    foreach (var getterCallback in _callbacks)
                    {
                        getterCallback();
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        if (((_invocationCount == 1) && (baseImplementation != null)) && !_defaultPropertyBehaviour.HasValueSet)
                        {
                            _defaultPropertyBehaviour.BackingField = baseImplementation();
                        }

                        return _defaultPropertyBehaviour.BackingField;
                    }

                    var nextReturnValue = _lastReturnValue;
                    if (_returnValues.TryDequeue(out var returnValue) && (returnValue != null))
                    {
                        nextReturnValue = returnValue;
                        _lastReturnValue = returnValue;
                    }

                    return nextReturnValue(baseImplementation);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredReturn)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class SetterImposter
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>>();
                private readonly global::System.Collections.Concurrent.ConcurrentStack<string> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<string>();
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredSetter;
                private bool _useBaseImplementation;
                internal SetterImposter(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                internal void Callback(global::Imposter.Abstractions.Arg<string> criteria, global::System.Action<string> callback)
                {
                    _callbacks.Enqueue(new global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>(criteria, callback));
                }

                void Called(global::Imposter.Abstractions.Arg<string> criteria, global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                    {
                        var performedInvocations = new global::System.Collections.Generic.List<string>();
                        foreach (var value in _invocationHistory)
                        {
                            performedInvocations.Add("set " + _propertyDisplayName + " = " + FormatValue(value));
                        }

                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount, string.Join(Environment.NewLine, performedInvocations));
                    }
                }

                internal void UseBaseImplementation()
                {
                    _hasConfiguredSetter = true;
                    _useBaseImplementation = true;
                }

                internal void Set(string value, global::System.Action<string>? baseImplementation = null)
                {
                    EnsureSetterConfigured();
                    _invocationHistory.Push(value);
                    foreach (var(criteria, setterCallback)in _callbacks)
                    {
                        if (criteria.Matches(value))
                            setterCallback(value);
                    }

                    if (_useBaseImplementation)
                    {
                        if (baseImplementation != null)
                        {
                            baseImplementation(value);
                            return;
                        }
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        _defaultPropertyBehaviour.BackingField = value;
                        _defaultPropertyBehaviour.HasValueSet = true;
                    }
                }

                private void EnsureSetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredSetter)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                }

                internal void MarkConfigured()
                {
                    _hasConfiguredSetter = true;
                }

                private static string FormatValue(object? value)
                {
                    return "<" + (value?.ToString() ?? "null") + ">";
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : IThrowingSetterVirtualPropertyPropertySetterBuilder, IThrowingSetterVirtualPropertyPropertySetterFluentBuilder, IThrowingSetterVirtualPropertyPropertySetterUseBaseImplementationBuilder
                {
                    private readonly SetterImposter _setterImposter;
                    private readonly global::Imposter.Abstractions.Arg<string> _criteria;
                    internal Builder(SetterImposter _setterImposter, global::Imposter.Abstractions.Arg<string> _criteria)
                    {
                        this._setterImposter = _setterImposter;
                        this._criteria = _criteria;
                    }

                    IThrowingSetterVirtualPropertyPropertySetterContinuationBuilder IThrowingSetterVirtualPropertyPropertySetterCallbackBuilder.Callback(global::System.Action<string> callback)
                    {
                        _setterImposter.Callback(_criteria, callback);
                        return this;
                    }

                    void IThrowingSetterVirtualPropertyPropertySetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _setterImposter.Called(_criteria, count);
                    }

                    IThrowingSetterVirtualPropertyPropertySetterUseBaseImplementationBuilder IThrowingSetterVirtualPropertyPropertySetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    IThrowingSetterVirtualPropertyPropertySetterFluentBuilder IThrowingSetterVirtualPropertyPropertySetterUseBaseImplementationBuilder.UseBaseImplementation()
                    {
                        _setterImposter.UseBaseImplementation();
                        return this;
                    }
                }
            }

            IThrowingSetterVirtualPropertyPropertyGetterBuilder IThrowingSetterVirtualPropertyPropertyBuilder.Getter()
            {
                return _getterImposterBuilder;
            }

            IThrowingSetterVirtualPropertyPropertySetterBuilder IThrowingSetterVirtualPropertyPropertyBuilder.Setter(global::Imposter.Abstractions.Arg<string> criteria)
            {
                _setterImposter.MarkConfigured();
                return new SetterImposter.Builder(_setterImposter, criteria);
            }

            IThrowingSetterVirtualPropertyPropertyBuilder IThrowingSetterVirtualPropertyPropertyBuilder.UseBaseImplementation()
            {
                _getterImposterBuilder.EnableBaseImplementation();
                _setterImposter.UseBaseImplementation();
                return this;
            }
        }

        public AdvancedClassWithVirtualPropertiesImposter(global::Imposter.Abstractions.ImposterMode invocationBehavior = global::Imposter.Abstractions.ImposterMode.Implicit)
        {
            this._GetterOnlyVirtualPropertyPropertyBuilderField = new GetterOnlyVirtualPropertyPropertyBuilder(invocationBehavior);
            this._SetterOnlyVirtualPropertyPropertyBuilderField = new SetterOnlyVirtualPropertyPropertyBuilder(invocationBehavior);
            this._ThrowingGetterVirtualPropertyPropertyBuilderField = new ThrowingGetterVirtualPropertyPropertyBuilder(invocationBehavior);
            this._ThrowingSetterVirtualPropertyPropertyBuilderField = new ThrowingSetterVirtualPropertyPropertyBuilder(invocationBehavior);
            this._imposterInstance = new ImposterTargetInstance(this);
            this._invocationBehavior = invocationBehavior;
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ImposterTargetInstance : global::Imposter.Tests.Features.PropertyImposter.AdvancedClassWithVirtualProperties
        {
            private readonly AdvancedClassWithVirtualPropertiesImposter _imposter;
            internal ImposterTargetInstance(AdvancedClassWithVirtualPropertiesImposter _imposter) : base()
            {
                this._imposter = _imposter;
            }

            public override string GetterOnlyVirtualProperty
            {
                get
                {
                    return _imposter._GetterOnlyVirtualPropertyPropertyBuilderField._getterImposterBuilder.Get(() => base.GetterOnlyVirtualProperty);
                }
            }

            public override string SetterOnlyVirtualProperty
            {
                set
                {
                    _imposter._SetterOnlyVirtualPropertyPropertyBuilderField._setterImposter.Set(value, (baseSetterValue) =>
                    {
                        base.SetterOnlyVirtualProperty = baseSetterValue;
                    });
                }
            }

            public override string ThrowingGetterVirtualProperty
            {
                get
                {
                    return _imposter._ThrowingGetterVirtualPropertyPropertyBuilderField._getterImposterBuilder.Get(() => base.ThrowingGetterVirtualProperty);
                }
            }

            public override string ThrowingSetterVirtualProperty
            {
                get
                {
                    return _imposter._ThrowingSetterVirtualPropertyPropertyBuilderField._getterImposterBuilder.Get(() => base.ThrowingSetterVirtualProperty);
                }

                set
                {
                    _imposter._ThrowingSetterVirtualPropertyPropertyBuilderField._setterImposter.Set(value, (baseSetterValue) =>
                    {
                        base.ThrowingSetterVirtualProperty = baseSetterValue;
                    });
                }
            }
        }
    }
}
#nullable restore
#pragma warning restore
