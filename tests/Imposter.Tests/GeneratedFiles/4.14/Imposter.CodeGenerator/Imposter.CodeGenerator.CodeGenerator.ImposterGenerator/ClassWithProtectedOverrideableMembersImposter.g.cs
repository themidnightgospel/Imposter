// <auto-generated />
#nullable enable
using global::System;
using global::System.Linq;
using global::System.Collections.Generic;
using global::System.Threading.Tasks;
using global::System.Diagnostics;
using global::System.Runtime.CompilerServices;
using global::Imposter.Abstractions;
using global::System.Collections.Concurrent;
using global::Imposter.Tests.Features.ClassImposter.Suts;

namespace Imposter.Tests.Features.ClassImposter.Suts
{
    [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
    public sealed class ClassWithProtectedOverrideableMembersImposter : global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers>
    {
        private readonly ProtectedVirtualMethodMethodImposter _protectedVirtualMethodMethodImposter;
        private readonly InvokeProtectedMethodMethodImposter _invokeProtectedMethodMethodImposter;
        private readonly ReadProtectedPropertyMethodImposter _readProtectedPropertyMethodImposter;
        private readonly WriteProtectedPropertyMethodImposter _writeProtectedPropertyMethodImposter;
        private readonly ReadProtectedValueMethodImposter _readProtectedValueMethodImposter;
        private readonly WriteProtectedValueMethodImposter _writeProtectedValueMethodImposter;
        private readonly SubscribeToProtectedEventMethodImposter _subscribeToProtectedEventMethodImposter;
        private readonly ProtectedVirtualMethodMethodInvocationHistoryCollection _protectedVirtualMethodMethodInvocationHistoryCollection = new ProtectedVirtualMethodMethodInvocationHistoryCollection();
        private readonly InvokeProtectedMethodMethodInvocationHistoryCollection _invokeProtectedMethodMethodInvocationHistoryCollection = new InvokeProtectedMethodMethodInvocationHistoryCollection();
        private readonly ReadProtectedPropertyMethodInvocationHistoryCollection _readProtectedPropertyMethodInvocationHistoryCollection = new ReadProtectedPropertyMethodInvocationHistoryCollection();
        private readonly WriteProtectedPropertyMethodInvocationHistoryCollection _writeProtectedPropertyMethodInvocationHistoryCollection = new WriteProtectedPropertyMethodInvocationHistoryCollection();
        private readonly ReadProtectedValueMethodInvocationHistoryCollection _readProtectedValueMethodInvocationHistoryCollection = new ReadProtectedValueMethodInvocationHistoryCollection();
        private readonly WriteProtectedValueMethodInvocationHistoryCollection _writeProtectedValueMethodInvocationHistoryCollection = new WriteProtectedValueMethodInvocationHistoryCollection();
        private readonly SubscribeToProtectedEventMethodInvocationHistoryCollection _subscribeToProtectedEventMethodInvocationHistoryCollection = new SubscribeToProtectedEventMethodInvocationHistoryCollection();
        public IProtectedVirtualMethodMethodImposterBuilder ProtectedVirtualMethod(global::Imposter.Abstractions.Arg<int> value)
        {
            return new ProtectedVirtualMethodMethodImposter.Builder(_protectedVirtualMethodMethodImposter, _protectedVirtualMethodMethodInvocationHistoryCollection, new ProtectedVirtualMethodArgumentsCriteria(value));
        }

        public IInvokeProtectedMethodMethodImposterBuilder InvokeProtectedMethod(global::Imposter.Abstractions.Arg<int> value)
        {
            return new InvokeProtectedMethodMethodImposter.Builder(_invokeProtectedMethodMethodImposter, _invokeProtectedMethodMethodInvocationHistoryCollection, new InvokeProtectedMethodArgumentsCriteria(value));
        }

        public IReadProtectedPropertyMethodImposterBuilder ReadProtectedProperty()
        {
            return new ReadProtectedPropertyMethodImposter.Builder(_readProtectedPropertyMethodImposter, _readProtectedPropertyMethodInvocationHistoryCollection);
        }

        public IWriteProtectedPropertyMethodImposterBuilder WriteProtectedProperty(global::Imposter.Abstractions.Arg<string> value)
        {
            return new WriteProtectedPropertyMethodImposter.Builder(_writeProtectedPropertyMethodImposter, _writeProtectedPropertyMethodInvocationHistoryCollection, new WriteProtectedPropertyArgumentsCriteria(value));
        }

        public IReadProtectedValueMethodImposterBuilder ReadProtectedValue(global::Imposter.Abstractions.Arg<int> index)
        {
            return new ReadProtectedValueMethodImposter.Builder(_readProtectedValueMethodImposter, _readProtectedValueMethodInvocationHistoryCollection, new ReadProtectedValueArgumentsCriteria(index));
        }

        public IWriteProtectedValueMethodImposterBuilder WriteProtectedValue(global::Imposter.Abstractions.Arg<int> index, global::Imposter.Abstractions.Arg<int> value)
        {
            return new WriteProtectedValueMethodImposter.Builder(_writeProtectedValueMethodImposter, _writeProtectedValueMethodInvocationHistoryCollection, new WriteProtectedValueArgumentsCriteria(index, value));
        }

        public ISubscribeToProtectedEventMethodImposterBuilder SubscribeToProtectedEvent(global::Imposter.Abstractions.Arg<global::System.EventHandler> handler)
        {
            return new SubscribeToProtectedEventMethodImposter.Builder(_subscribeToProtectedEventMethodImposter, _subscribeToProtectedEventMethodInvocationHistoryCollection, new SubscribeToProtectedEventArgumentsCriteria(handler));
        }

        private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
        private ImposterTargetInstance _imposterInstance;
        global::Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers>.Instance()
        {
            return _imposterInstance;
        }

        // virtual int ClassWithProtectedOverrideableMembers.InvokeProtectedMethod(int value)
        public delegate int InvokeProtectedMethodDelegate(int value);
        // virtual int ClassWithProtectedOverrideableMembers.InvokeProtectedMethod(int value)
        public delegate void InvokeProtectedMethodCallbackDelegate(int value);
        // virtual int ClassWithProtectedOverrideableMembers.InvokeProtectedMethod(int value)
        public delegate global::System.Exception InvokeProtectedMethodExceptionGeneratorDelegate(int value);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class InvokeProtectedMethodArguments
        {
            public int value;
            internal InvokeProtectedMethodArguments(int value)
            {
                this.value = value;
            }
        }

        // virtual int ClassWithProtectedOverrideableMembers.InvokeProtectedMethod(int value)
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class InvokeProtectedMethodArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<int> value { get; }

            public InvokeProtectedMethodArgumentsCriteria(global::Imposter.Abstractions.Arg<int> value)
            {
                this.value = value;
            }

            public bool Matches(InvokeProtectedMethodArguments arguments)
            {
                return value.Matches(arguments.value);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IInvokeProtectedMethodMethodInvocationHistory
        {
            bool Matches(InvokeProtectedMethodArgumentsCriteria criteria);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class InvokeProtectedMethodMethodInvocationHistory : IInvokeProtectedMethodMethodInvocationHistory
        {
            internal InvokeProtectedMethodArguments Arguments;
            internal int? Result;
            internal global::System.Exception? Exception;
            public InvokeProtectedMethodMethodInvocationHistory(InvokeProtectedMethodArguments Arguments, int? Result, global::System.Exception? Exception)
            {
                this.Arguments = Arguments;
                this.Result = Result;
                this.Exception = Exception;
            }

            public bool Matches(InvokeProtectedMethodArgumentsCriteria criteria)
            {
                return criteria.Matches(Arguments);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class InvokeProtectedMethodMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<IInvokeProtectedMethodMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<IInvokeProtectedMethodMethodInvocationHistory>();
            internal void Add(IInvokeProtectedMethodMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count(InvokeProtectedMethodArgumentsCriteria argumentsCriteria)
            {
                return _invocationHistory.Count(it => it.Matches(argumentsCriteria));
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class InvokeProtectedMethodMethodInvocationImposterGroup
        {
            internal static InvokeProtectedMethodMethodInvocationImposterGroup Default = new InvokeProtectedMethodMethodInvocationImposterGroup(new InvokeProtectedMethodArgumentsCriteria(global::Imposter.Abstractions.Arg<int>.Any()));
            internal InvokeProtectedMethodArgumentsCriteria ArgumentsCriteria { get; }

            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public InvokeProtectedMethodMethodInvocationImposterGroup(InvokeProtectedMethodArgumentsCriteria argumentsCriteria)
            {
                ArgumentsCriteria = argumentsCriteria;
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public int Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int value, InvokeProtectedMethodDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                return invocationImposter.Invoke(invocationBehavior, methodDisplayName, value, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default.Returns(DefaultResultGenerator);
                }

                private InvokeProtectedMethodDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<InvokeProtectedMethodCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<InvokeProtectedMethodCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public int Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int value, InvokeProtectedMethodDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    int result = _resultGenerator.Invoke(value);
                    foreach (var callback in _callbacks)
                    {
                        callback(value);
                    }

                    return result;
                }

                internal void Callback(InvokeProtectedMethodCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Returns(InvokeProtectedMethodDelegate resultGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = resultGenerator;
                }

                internal void Returns(int value_1)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int value) =>
                    {
                        return value_1;
                    };
                }

                internal void Throws(InvokeProtectedMethodExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int value) =>
                    {
                        throw exceptionGenerator(value);
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static int DefaultResultGenerator(int value)
                {
                    return default !;
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IInvokeProtectedMethodMethodInvocationImposterGroupCallback
        {
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation Callback(InvokeProtectedMethodCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IInvokeProtectedMethodMethodInvocationImposterGroupContinuation : IInvokeProtectedMethodMethodInvocationImposterGroupCallback
        {
            IInvokeProtectedMethodMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IInvokeProtectedMethodMethodInvocationImposterGroup : IInvokeProtectedMethodMethodInvocationImposterGroupCallback
        {
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation Throws(InvokeProtectedMethodExceptionGeneratorDelegate exceptionGenerator);
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation Returns(InvokeProtectedMethodDelegate resultGenerator);
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation Returns(int value);
            IInvokeProtectedMethodMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface InvokeProtectedMethodInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IInvokeProtectedMethodMethodImposterBuilder : IInvokeProtectedMethodMethodInvocationImposterGroup, IInvokeProtectedMethodMethodInvocationImposterGroupCallback, InvokeProtectedMethodInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class InvokeProtectedMethodMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<InvokeProtectedMethodMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<InvokeProtectedMethodMethodInvocationImposterGroup>();
            private readonly InvokeProtectedMethodMethodInvocationHistoryCollection _invokeProtectedMethodMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public InvokeProtectedMethodMethodImposter(InvokeProtectedMethodMethodInvocationHistoryCollection _invokeProtectedMethodMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._invokeProtectedMethodMethodInvocationHistoryCollection = _invokeProtectedMethodMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup(InvokeProtectedMethodArguments arguments)
            {
                return FindMatchingInvocationImposterGroup(arguments) != null;
            }

            private InvokeProtectedMethodMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup(InvokeProtectedMethodArguments arguments)
            {
                foreach (var invocationImposterGroup in _invocationImposters)
                {
                    if (invocationImposterGroup.ArgumentsCriteria.Matches(arguments))
                        return invocationImposterGroup;
                }

                return null;
            }

            public int Invoke(int value, InvokeProtectedMethodDelegate? baseImplementation = null)
            {
                var arguments = new InvokeProtectedMethodArguments(value);
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup(arguments);
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual int ClassWithProtectedOverrideableMembers.InvokeProtectedMethod(int value)");
                    }

                    matchingInvocationImposterGroup = InvokeProtectedMethodMethodInvocationImposterGroup.Default;
                }

                try
                {
                    var result = matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual int ClassWithProtectedOverrideableMembers.InvokeProtectedMethod(int value)", value, baseImplementation);
                    _invokeProtectedMethodMethodInvocationHistoryCollection.Add(new InvokeProtectedMethodMethodInvocationHistory(arguments, result, default));
                    return result;
                }
                catch (global::System.Exception ex)
                {
                    _invokeProtectedMethodMethodInvocationHistoryCollection.Add(new InvokeProtectedMethodMethodInvocationHistory(arguments, default !, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : IInvokeProtectedMethodMethodImposterBuilder, IInvokeProtectedMethodMethodInvocationImposterGroupContinuation
            {
                private readonly InvokeProtectedMethodMethodImposter _imposter;
                private readonly InvokeProtectedMethodMethodInvocationHistoryCollection _invokeProtectedMethodMethodInvocationHistoryCollection;
                private readonly InvokeProtectedMethodArgumentsCriteria _argumentsCriteria;
                private readonly InvokeProtectedMethodMethodInvocationImposterGroup _invocationImposterGroup;
                private InvokeProtectedMethodMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(InvokeProtectedMethodMethodImposter _imposter, InvokeProtectedMethodMethodInvocationHistoryCollection _invokeProtectedMethodMethodInvocationHistoryCollection, InvokeProtectedMethodArgumentsCriteria _argumentsCriteria)
                {
                    this._imposter = _imposter;
                    this._invokeProtectedMethodMethodInvocationHistoryCollection = _invokeProtectedMethodMethodInvocationHistoryCollection;
                    this._argumentsCriteria = _argumentsCriteria;
                    this._invocationImposterGroup = new InvokeProtectedMethodMethodInvocationImposterGroup(_argumentsCriteria);
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws((int value) =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws((int value) =>
                    {
                        throw exception;
                    });
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroup.Throws(InvokeProtectedMethodExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws((int value) =>
                    {
                        throw exceptionGenerator.Invoke(value);
                    });
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroupCallback.Callback(InvokeProtectedMethodCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroup.Returns(InvokeProtectedMethodDelegate resultGenerator)
                {
                    _currentInvocationImposter.Returns(resultGenerator);
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroup.Returns(int value_1)
                {
                    _currentInvocationImposter.Returns(value_1);
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroupContinuation IInvokeProtectedMethodMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                IInvokeProtectedMethodMethodInvocationImposterGroup IInvokeProtectedMethodMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void InvokeProtectedMethodInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _invokeProtectedMethodMethodInvocationHistoryCollection.Count(_argumentsCriteria);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        // virtual int ClassWithProtectedOverrideableMembers.ProtectedVirtualMethod(int value)
        public delegate int ProtectedVirtualMethodDelegate(int value);
        // virtual int ClassWithProtectedOverrideableMembers.ProtectedVirtualMethod(int value)
        public delegate void ProtectedVirtualMethodCallbackDelegate(int value);
        // virtual int ClassWithProtectedOverrideableMembers.ProtectedVirtualMethod(int value)
        public delegate global::System.Exception ProtectedVirtualMethodExceptionGeneratorDelegate(int value);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class ProtectedVirtualMethodArguments
        {
            public int value;
            internal ProtectedVirtualMethodArguments(int value)
            {
                this.value = value;
            }
        }

        // virtual int ClassWithProtectedOverrideableMembers.ProtectedVirtualMethod(int value)
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class ProtectedVirtualMethodArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<int> value { get; }

            public ProtectedVirtualMethodArgumentsCriteria(global::Imposter.Abstractions.Arg<int> value)
            {
                this.value = value;
            }

            public bool Matches(ProtectedVirtualMethodArguments arguments)
            {
                return value.Matches(arguments.value);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualMethodMethodInvocationHistory
        {
            bool Matches(ProtectedVirtualMethodArgumentsCriteria criteria);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ProtectedVirtualMethodMethodInvocationHistory : IProtectedVirtualMethodMethodInvocationHistory
        {
            internal ProtectedVirtualMethodArguments Arguments;
            internal int? Result;
            internal global::System.Exception? Exception;
            public ProtectedVirtualMethodMethodInvocationHistory(ProtectedVirtualMethodArguments Arguments, int? Result, global::System.Exception? Exception)
            {
                this.Arguments = Arguments;
                this.Result = Result;
                this.Exception = Exception;
            }

            public bool Matches(ProtectedVirtualMethodArgumentsCriteria criteria)
            {
                return criteria.Matches(Arguments);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ProtectedVirtualMethodMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<IProtectedVirtualMethodMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<IProtectedVirtualMethodMethodInvocationHistory>();
            internal void Add(IProtectedVirtualMethodMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count(ProtectedVirtualMethodArgumentsCriteria argumentsCriteria)
            {
                return _invocationHistory.Count(it => it.Matches(argumentsCriteria));
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ProtectedVirtualMethodMethodInvocationImposterGroup
        {
            internal static ProtectedVirtualMethodMethodInvocationImposterGroup Default = new ProtectedVirtualMethodMethodInvocationImposterGroup(new ProtectedVirtualMethodArgumentsCriteria(global::Imposter.Abstractions.Arg<int>.Any()));
            internal ProtectedVirtualMethodArgumentsCriteria ArgumentsCriteria { get; }

            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public ProtectedVirtualMethodMethodInvocationImposterGroup(ProtectedVirtualMethodArgumentsCriteria argumentsCriteria)
            {
                ArgumentsCriteria = argumentsCriteria;
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public int Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int value, ProtectedVirtualMethodDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                return invocationImposter.Invoke(invocationBehavior, methodDisplayName, value, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default.Returns(DefaultResultGenerator);
                }

                private ProtectedVirtualMethodDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<ProtectedVirtualMethodCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<ProtectedVirtualMethodCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public int Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int value, ProtectedVirtualMethodDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    int result = _resultGenerator.Invoke(value);
                    foreach (var callback in _callbacks)
                    {
                        callback(value);
                    }

                    return result;
                }

                internal void Callback(ProtectedVirtualMethodCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Returns(ProtectedVirtualMethodDelegate resultGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = resultGenerator;
                }

                internal void Returns(int value_1)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int value) =>
                    {
                        return value_1;
                    };
                }

                internal void Throws(ProtectedVirtualMethodExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int value) =>
                    {
                        throw exceptionGenerator(value);
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static int DefaultResultGenerator(int value)
                {
                    return default !;
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualMethodMethodInvocationImposterGroupCallback
        {
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation Callback(ProtectedVirtualMethodCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualMethodMethodInvocationImposterGroupContinuation : IProtectedVirtualMethodMethodInvocationImposterGroupCallback
        {
            IProtectedVirtualMethodMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualMethodMethodInvocationImposterGroup : IProtectedVirtualMethodMethodInvocationImposterGroupCallback
        {
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation Throws(ProtectedVirtualMethodExceptionGeneratorDelegate exceptionGenerator);
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation Returns(ProtectedVirtualMethodDelegate resultGenerator);
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation Returns(int value);
            IProtectedVirtualMethodMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ProtectedVirtualMethodInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualMethodMethodImposterBuilder : IProtectedVirtualMethodMethodInvocationImposterGroup, IProtectedVirtualMethodMethodInvocationImposterGroupCallback, ProtectedVirtualMethodInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ProtectedVirtualMethodMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<ProtectedVirtualMethodMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<ProtectedVirtualMethodMethodInvocationImposterGroup>();
            private readonly ProtectedVirtualMethodMethodInvocationHistoryCollection _protectedVirtualMethodMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public ProtectedVirtualMethodMethodImposter(ProtectedVirtualMethodMethodInvocationHistoryCollection _protectedVirtualMethodMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._protectedVirtualMethodMethodInvocationHistoryCollection = _protectedVirtualMethodMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup(ProtectedVirtualMethodArguments arguments)
            {
                return FindMatchingInvocationImposterGroup(arguments) != null;
            }

            private ProtectedVirtualMethodMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup(ProtectedVirtualMethodArguments arguments)
            {
                foreach (var invocationImposterGroup in _invocationImposters)
                {
                    if (invocationImposterGroup.ArgumentsCriteria.Matches(arguments))
                        return invocationImposterGroup;
                }

                return null;
            }

            public int Invoke(int value, ProtectedVirtualMethodDelegate? baseImplementation = null)
            {
                var arguments = new ProtectedVirtualMethodArguments(value);
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup(arguments);
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual int ClassWithProtectedOverrideableMembers.ProtectedVirtualMethod(int value)");
                    }

                    matchingInvocationImposterGroup = ProtectedVirtualMethodMethodInvocationImposterGroup.Default;
                }

                try
                {
                    var result = matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual int ClassWithProtectedOverrideableMembers.ProtectedVirtualMethod(int value)", value, baseImplementation);
                    _protectedVirtualMethodMethodInvocationHistoryCollection.Add(new ProtectedVirtualMethodMethodInvocationHistory(arguments, result, default));
                    return result;
                }
                catch (global::System.Exception ex)
                {
                    _protectedVirtualMethodMethodInvocationHistoryCollection.Add(new ProtectedVirtualMethodMethodInvocationHistory(arguments, default !, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : IProtectedVirtualMethodMethodImposterBuilder, IProtectedVirtualMethodMethodInvocationImposterGroupContinuation
            {
                private readonly ProtectedVirtualMethodMethodImposter _imposter;
                private readonly ProtectedVirtualMethodMethodInvocationHistoryCollection _protectedVirtualMethodMethodInvocationHistoryCollection;
                private readonly ProtectedVirtualMethodArgumentsCriteria _argumentsCriteria;
                private readonly ProtectedVirtualMethodMethodInvocationImposterGroup _invocationImposterGroup;
                private ProtectedVirtualMethodMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(ProtectedVirtualMethodMethodImposter _imposter, ProtectedVirtualMethodMethodInvocationHistoryCollection _protectedVirtualMethodMethodInvocationHistoryCollection, ProtectedVirtualMethodArgumentsCriteria _argumentsCriteria)
                {
                    this._imposter = _imposter;
                    this._protectedVirtualMethodMethodInvocationHistoryCollection = _protectedVirtualMethodMethodInvocationHistoryCollection;
                    this._argumentsCriteria = _argumentsCriteria;
                    this._invocationImposterGroup = new ProtectedVirtualMethodMethodInvocationImposterGroup(_argumentsCriteria);
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws((int value) =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws((int value) =>
                    {
                        throw exception;
                    });
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroup.Throws(ProtectedVirtualMethodExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws((int value) =>
                    {
                        throw exceptionGenerator.Invoke(value);
                    });
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroupCallback.Callback(ProtectedVirtualMethodCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroup.Returns(ProtectedVirtualMethodDelegate resultGenerator)
                {
                    _currentInvocationImposter.Returns(resultGenerator);
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroup.Returns(int value_1)
                {
                    _currentInvocationImposter.Returns(value_1);
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroupContinuation IProtectedVirtualMethodMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                IProtectedVirtualMethodMethodInvocationImposterGroup IProtectedVirtualMethodMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void ProtectedVirtualMethodInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _protectedVirtualMethodMethodInvocationHistoryCollection.Count(_argumentsCriteria);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        // virtual string ClassWithProtectedOverrideableMembers.ReadProtectedProperty()
        public delegate string ReadProtectedPropertyDelegate();
        // virtual string ClassWithProtectedOverrideableMembers.ReadProtectedProperty()
        public delegate void ReadProtectedPropertyCallbackDelegate();
        // virtual string ClassWithProtectedOverrideableMembers.ReadProtectedProperty()
        public delegate global::System.Exception ReadProtectedPropertyExceptionGeneratorDelegate();
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedPropertyMethodInvocationHistory
        {
            bool Matches();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ReadProtectedPropertyMethodInvocationHistory : IReadProtectedPropertyMethodInvocationHistory
        {
            internal string? Result;
            internal global::System.Exception? Exception;
            public ReadProtectedPropertyMethodInvocationHistory(string? Result, global::System.Exception? Exception)
            {
                this.Result = Result;
                this.Exception = Exception;
            }

            public bool Matches()
            {
                return true;
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ReadProtectedPropertyMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<IReadProtectedPropertyMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<IReadProtectedPropertyMethodInvocationHistory>();
            internal void Add(IReadProtectedPropertyMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count()
            {
                return _invocationHistory.Count(it => it.Matches());
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ReadProtectedPropertyMethodInvocationImposterGroup
        {
            internal static ReadProtectedPropertyMethodInvocationImposterGroup Default = new ReadProtectedPropertyMethodInvocationImposterGroup();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public ReadProtectedPropertyMethodInvocationImposterGroup()
            {
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public string Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, ReadProtectedPropertyDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                return invocationImposter.Invoke(invocationBehavior, methodDisplayName, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default.Returns(DefaultResultGenerator);
                }

                private ReadProtectedPropertyDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<ReadProtectedPropertyCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<ReadProtectedPropertyCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public string Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, ReadProtectedPropertyDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    string result = _resultGenerator.Invoke();
                    foreach (var callback in _callbacks)
                    {
                        callback();
                    }

                    return result;
                }

                internal void Callback(ReadProtectedPropertyCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Returns(ReadProtectedPropertyDelegate resultGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = resultGenerator;
                }

                internal void Returns(string value)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = () =>
                    {
                        return value;
                    };
                }

                internal void Throws(ReadProtectedPropertyExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = () =>
                    {
                        throw exceptionGenerator();
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static string DefaultResultGenerator()
                {
                    return default !;
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedPropertyMethodInvocationImposterGroupCallback
        {
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation Callback(ReadProtectedPropertyCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedPropertyMethodInvocationImposterGroupContinuation : IReadProtectedPropertyMethodInvocationImposterGroupCallback
        {
            IReadProtectedPropertyMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedPropertyMethodInvocationImposterGroup : IReadProtectedPropertyMethodInvocationImposterGroupCallback
        {
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation Throws(ReadProtectedPropertyExceptionGeneratorDelegate exceptionGenerator);
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation Returns(ReadProtectedPropertyDelegate resultGenerator);
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation Returns(string value);
            IReadProtectedPropertyMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ReadProtectedPropertyInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedPropertyMethodImposterBuilder : IReadProtectedPropertyMethodInvocationImposterGroup, IReadProtectedPropertyMethodInvocationImposterGroupCallback, ReadProtectedPropertyInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ReadProtectedPropertyMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<ReadProtectedPropertyMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<ReadProtectedPropertyMethodInvocationImposterGroup>();
            private readonly ReadProtectedPropertyMethodInvocationHistoryCollection _readProtectedPropertyMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public ReadProtectedPropertyMethodImposter(ReadProtectedPropertyMethodInvocationHistoryCollection _readProtectedPropertyMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._readProtectedPropertyMethodInvocationHistoryCollection = _readProtectedPropertyMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup()
            {
                return FindMatchingInvocationImposterGroup() != null;
            }

            private ReadProtectedPropertyMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup()
            {
                if (_invocationImposters.TryPeek(out var invocationImposterGroup))
                    return invocationImposterGroup;
                else
                    return null;
            }

            public string Invoke(ReadProtectedPropertyDelegate? baseImplementation = null)
            {
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup();
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual string ClassWithProtectedOverrideableMembers.ReadProtectedProperty()");
                    }

                    matchingInvocationImposterGroup = ReadProtectedPropertyMethodInvocationImposterGroup.Default;
                }

                try
                {
                    var result = matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual string ClassWithProtectedOverrideableMembers.ReadProtectedProperty()", baseImplementation);
                    _readProtectedPropertyMethodInvocationHistoryCollection.Add(new ReadProtectedPropertyMethodInvocationHistory(result, default));
                    return result;
                }
                catch (global::System.Exception ex)
                {
                    _readProtectedPropertyMethodInvocationHistoryCollection.Add(new ReadProtectedPropertyMethodInvocationHistory(default !, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : IReadProtectedPropertyMethodImposterBuilder, IReadProtectedPropertyMethodInvocationImposterGroupContinuation
            {
                private readonly ReadProtectedPropertyMethodImposter _imposter;
                private readonly ReadProtectedPropertyMethodInvocationHistoryCollection _readProtectedPropertyMethodInvocationHistoryCollection;
                private readonly ReadProtectedPropertyMethodInvocationImposterGroup _invocationImposterGroup;
                private ReadProtectedPropertyMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(ReadProtectedPropertyMethodImposter _imposter, ReadProtectedPropertyMethodInvocationHistoryCollection _readProtectedPropertyMethodInvocationHistoryCollection)
                {
                    this._imposter = _imposter;
                    this._readProtectedPropertyMethodInvocationHistoryCollection = _readProtectedPropertyMethodInvocationHistoryCollection;
                    this._invocationImposterGroup = new ReadProtectedPropertyMethodInvocationImposterGroup();
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws(() =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws(() =>
                    {
                        throw exception;
                    });
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroup.Throws(ReadProtectedPropertyExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws(() =>
                    {
                        throw exceptionGenerator.Invoke();
                    });
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroupCallback.Callback(ReadProtectedPropertyCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroup.Returns(ReadProtectedPropertyDelegate resultGenerator)
                {
                    _currentInvocationImposter.Returns(resultGenerator);
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroup.Returns(string value)
                {
                    _currentInvocationImposter.Returns(value);
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroupContinuation IReadProtectedPropertyMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                IReadProtectedPropertyMethodInvocationImposterGroup IReadProtectedPropertyMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void ReadProtectedPropertyInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _readProtectedPropertyMethodInvocationHistoryCollection.Count();
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        // virtual int ClassWithProtectedOverrideableMembers.ReadProtectedValue(int index)
        public delegate int ReadProtectedValueDelegate(int index);
        // virtual int ClassWithProtectedOverrideableMembers.ReadProtectedValue(int index)
        public delegate void ReadProtectedValueCallbackDelegate(int index);
        // virtual int ClassWithProtectedOverrideableMembers.ReadProtectedValue(int index)
        public delegate global::System.Exception ReadProtectedValueExceptionGeneratorDelegate(int index);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class ReadProtectedValueArguments
        {
            public int index;
            internal ReadProtectedValueArguments(int index)
            {
                this.index = index;
            }
        }

        // virtual int ClassWithProtectedOverrideableMembers.ReadProtectedValue(int index)
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class ReadProtectedValueArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<int> index { get; }

            public ReadProtectedValueArgumentsCriteria(global::Imposter.Abstractions.Arg<int> index)
            {
                this.index = index;
            }

            public bool Matches(ReadProtectedValueArguments arguments)
            {
                return index.Matches(arguments.index);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedValueMethodInvocationHistory
        {
            bool Matches(ReadProtectedValueArgumentsCriteria criteria);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ReadProtectedValueMethodInvocationHistory : IReadProtectedValueMethodInvocationHistory
        {
            internal ReadProtectedValueArguments Arguments;
            internal int? Result;
            internal global::System.Exception? Exception;
            public ReadProtectedValueMethodInvocationHistory(ReadProtectedValueArguments Arguments, int? Result, global::System.Exception? Exception)
            {
                this.Arguments = Arguments;
                this.Result = Result;
                this.Exception = Exception;
            }

            public bool Matches(ReadProtectedValueArgumentsCriteria criteria)
            {
                return criteria.Matches(Arguments);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ReadProtectedValueMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<IReadProtectedValueMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<IReadProtectedValueMethodInvocationHistory>();
            internal void Add(IReadProtectedValueMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count(ReadProtectedValueArgumentsCriteria argumentsCriteria)
            {
                return _invocationHistory.Count(it => it.Matches(argumentsCriteria));
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ReadProtectedValueMethodInvocationImposterGroup
        {
            internal static ReadProtectedValueMethodInvocationImposterGroup Default = new ReadProtectedValueMethodInvocationImposterGroup(new ReadProtectedValueArgumentsCriteria(global::Imposter.Abstractions.Arg<int>.Any()));
            internal ReadProtectedValueArgumentsCriteria ArgumentsCriteria { get; }

            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public ReadProtectedValueMethodInvocationImposterGroup(ReadProtectedValueArgumentsCriteria argumentsCriteria)
            {
                ArgumentsCriteria = argumentsCriteria;
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public int Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int index, ReadProtectedValueDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                return invocationImposter.Invoke(invocationBehavior, methodDisplayName, index, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default.Returns(DefaultResultGenerator);
                }

                private ReadProtectedValueDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<ReadProtectedValueCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<ReadProtectedValueCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public int Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int index, ReadProtectedValueDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    int result = _resultGenerator.Invoke(index);
                    foreach (var callback in _callbacks)
                    {
                        callback(index);
                    }

                    return result;
                }

                internal void Callback(ReadProtectedValueCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Returns(ReadProtectedValueDelegate resultGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = resultGenerator;
                }

                internal void Returns(int value)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int index) =>
                    {
                        return value;
                    };
                }

                internal void Throws(ReadProtectedValueExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int index) =>
                    {
                        throw exceptionGenerator(index);
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static int DefaultResultGenerator(int index)
                {
                    return default !;
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedValueMethodInvocationImposterGroupCallback
        {
            IReadProtectedValueMethodInvocationImposterGroupContinuation Callback(ReadProtectedValueCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedValueMethodInvocationImposterGroupContinuation : IReadProtectedValueMethodInvocationImposterGroupCallback
        {
            IReadProtectedValueMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedValueMethodInvocationImposterGroup : IReadProtectedValueMethodInvocationImposterGroupCallback
        {
            IReadProtectedValueMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            IReadProtectedValueMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            IReadProtectedValueMethodInvocationImposterGroupContinuation Throws(ReadProtectedValueExceptionGeneratorDelegate exceptionGenerator);
            IReadProtectedValueMethodInvocationImposterGroupContinuation Returns(ReadProtectedValueDelegate resultGenerator);
            IReadProtectedValueMethodInvocationImposterGroupContinuation Returns(int value);
            IReadProtectedValueMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ReadProtectedValueInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IReadProtectedValueMethodImposterBuilder : IReadProtectedValueMethodInvocationImposterGroup, IReadProtectedValueMethodInvocationImposterGroupCallback, ReadProtectedValueInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ReadProtectedValueMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<ReadProtectedValueMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<ReadProtectedValueMethodInvocationImposterGroup>();
            private readonly ReadProtectedValueMethodInvocationHistoryCollection _readProtectedValueMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public ReadProtectedValueMethodImposter(ReadProtectedValueMethodInvocationHistoryCollection _readProtectedValueMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._readProtectedValueMethodInvocationHistoryCollection = _readProtectedValueMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup(ReadProtectedValueArguments arguments)
            {
                return FindMatchingInvocationImposterGroup(arguments) != null;
            }

            private ReadProtectedValueMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup(ReadProtectedValueArguments arguments)
            {
                foreach (var invocationImposterGroup in _invocationImposters)
                {
                    if (invocationImposterGroup.ArgumentsCriteria.Matches(arguments))
                        return invocationImposterGroup;
                }

                return null;
            }

            public int Invoke(int index, ReadProtectedValueDelegate? baseImplementation = null)
            {
                var arguments = new ReadProtectedValueArguments(index);
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup(arguments);
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual int ClassWithProtectedOverrideableMembers.ReadProtectedValue(int index)");
                    }

                    matchingInvocationImposterGroup = ReadProtectedValueMethodInvocationImposterGroup.Default;
                }

                try
                {
                    var result = matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual int ClassWithProtectedOverrideableMembers.ReadProtectedValue(int index)", index, baseImplementation);
                    _readProtectedValueMethodInvocationHistoryCollection.Add(new ReadProtectedValueMethodInvocationHistory(arguments, result, default));
                    return result;
                }
                catch (global::System.Exception ex)
                {
                    _readProtectedValueMethodInvocationHistoryCollection.Add(new ReadProtectedValueMethodInvocationHistory(arguments, default !, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : IReadProtectedValueMethodImposterBuilder, IReadProtectedValueMethodInvocationImposterGroupContinuation
            {
                private readonly ReadProtectedValueMethodImposter _imposter;
                private readonly ReadProtectedValueMethodInvocationHistoryCollection _readProtectedValueMethodInvocationHistoryCollection;
                private readonly ReadProtectedValueArgumentsCriteria _argumentsCriteria;
                private readonly ReadProtectedValueMethodInvocationImposterGroup _invocationImposterGroup;
                private ReadProtectedValueMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(ReadProtectedValueMethodImposter _imposter, ReadProtectedValueMethodInvocationHistoryCollection _readProtectedValueMethodInvocationHistoryCollection, ReadProtectedValueArgumentsCriteria _argumentsCriteria)
                {
                    this._imposter = _imposter;
                    this._readProtectedValueMethodInvocationHistoryCollection = _readProtectedValueMethodInvocationHistoryCollection;
                    this._argumentsCriteria = _argumentsCriteria;
                    this._invocationImposterGroup = new ReadProtectedValueMethodInvocationImposterGroup(_argumentsCriteria);
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws((int index) =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws((int index) =>
                    {
                        throw exception;
                    });
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroup.Throws(ReadProtectedValueExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws((int index) =>
                    {
                        throw exceptionGenerator.Invoke(index);
                    });
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroupCallback.Callback(ReadProtectedValueCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroup.Returns(ReadProtectedValueDelegate resultGenerator)
                {
                    _currentInvocationImposter.Returns(resultGenerator);
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroup.Returns(int value)
                {
                    _currentInvocationImposter.Returns(value);
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroupContinuation IReadProtectedValueMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                IReadProtectedValueMethodInvocationImposterGroup IReadProtectedValueMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void ReadProtectedValueInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _readProtectedValueMethodInvocationHistoryCollection.Count(_argumentsCriteria);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        // virtual void ClassWithProtectedOverrideableMembers.SubscribeToProtectedEvent(EventHandler handler)
        public delegate void SubscribeToProtectedEventDelegate(global::System.EventHandler handler);
        // virtual void ClassWithProtectedOverrideableMembers.SubscribeToProtectedEvent(EventHandler handler)
        public delegate void SubscribeToProtectedEventCallbackDelegate(global::System.EventHandler handler);
        // virtual void ClassWithProtectedOverrideableMembers.SubscribeToProtectedEvent(EventHandler handler)
        public delegate global::System.Exception SubscribeToProtectedEventExceptionGeneratorDelegate(global::System.EventHandler handler);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class SubscribeToProtectedEventArguments
        {
            public global::System.EventHandler handler;
            internal SubscribeToProtectedEventArguments(global::System.EventHandler handler)
            {
                this.handler = handler;
            }
        }

        // virtual void ClassWithProtectedOverrideableMembers.SubscribeToProtectedEvent(EventHandler handler)
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class SubscribeToProtectedEventArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<global::System.EventHandler> handler { get; }

            public SubscribeToProtectedEventArgumentsCriteria(global::Imposter.Abstractions.Arg<global::System.EventHandler> handler)
            {
                this.handler = handler;
            }

            public bool Matches(SubscribeToProtectedEventArguments arguments)
            {
                return handler.Matches(arguments.handler);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISubscribeToProtectedEventMethodInvocationHistory
        {
            bool Matches(SubscribeToProtectedEventArgumentsCriteria criteria);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class SubscribeToProtectedEventMethodInvocationHistory : ISubscribeToProtectedEventMethodInvocationHistory
        {
            internal SubscribeToProtectedEventArguments Arguments;
            internal global::System.Exception? Exception;
            public SubscribeToProtectedEventMethodInvocationHistory(SubscribeToProtectedEventArguments Arguments, global::System.Exception? Exception)
            {
                this.Arguments = Arguments;
                this.Exception = Exception;
            }

            public bool Matches(SubscribeToProtectedEventArgumentsCriteria criteria)
            {
                return criteria.Matches(Arguments);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class SubscribeToProtectedEventMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<ISubscribeToProtectedEventMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<ISubscribeToProtectedEventMethodInvocationHistory>();
            internal void Add(ISubscribeToProtectedEventMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count(SubscribeToProtectedEventArgumentsCriteria argumentsCriteria)
            {
                return _invocationHistory.Count(it => it.Matches(argumentsCriteria));
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class SubscribeToProtectedEventMethodInvocationImposterGroup
        {
            internal static SubscribeToProtectedEventMethodInvocationImposterGroup Default = new SubscribeToProtectedEventMethodInvocationImposterGroup(new SubscribeToProtectedEventArgumentsCriteria(global::Imposter.Abstractions.Arg<global::System.EventHandler>.Any()));
            internal SubscribeToProtectedEventArgumentsCriteria ArgumentsCriteria { get; }

            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public SubscribeToProtectedEventMethodInvocationImposterGroup(SubscribeToProtectedEventArgumentsCriteria argumentsCriteria)
            {
                ArgumentsCriteria = argumentsCriteria;
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public void Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, global::System.EventHandler handler, SubscribeToProtectedEventDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                invocationImposter.Invoke(invocationBehavior, methodDisplayName, handler, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default._resultGenerator = DefaultResultGenerator;
                }

                private SubscribeToProtectedEventDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<SubscribeToProtectedEventCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<SubscribeToProtectedEventCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public void Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, global::System.EventHandler handler, SubscribeToProtectedEventDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    _resultGenerator.Invoke(handler);
                    foreach (var callback in _callbacks)
                    {
                        callback(handler);
                    }
                }

                internal void Callback(SubscribeToProtectedEventCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Throws(SubscribeToProtectedEventExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (global::System.EventHandler handler) =>
                    {
                        throw exceptionGenerator(handler);
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static void DefaultResultGenerator(global::System.EventHandler handler)
                {
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISubscribeToProtectedEventMethodInvocationImposterGroupCallback
        {
            ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation Callback(SubscribeToProtectedEventCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation : ISubscribeToProtectedEventMethodInvocationImposterGroupCallback
        {
            ISubscribeToProtectedEventMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISubscribeToProtectedEventMethodInvocationImposterGroup : ISubscribeToProtectedEventMethodInvocationImposterGroupCallback
        {
            ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation Throws(SubscribeToProtectedEventExceptionGeneratorDelegate exceptionGenerator);
            ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface SubscribeToProtectedEventInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ISubscribeToProtectedEventMethodImposterBuilder : ISubscribeToProtectedEventMethodInvocationImposterGroup, ISubscribeToProtectedEventMethodInvocationImposterGroupCallback, SubscribeToProtectedEventInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class SubscribeToProtectedEventMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<SubscribeToProtectedEventMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<SubscribeToProtectedEventMethodInvocationImposterGroup>();
            private readonly SubscribeToProtectedEventMethodInvocationHistoryCollection _subscribeToProtectedEventMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public SubscribeToProtectedEventMethodImposter(SubscribeToProtectedEventMethodInvocationHistoryCollection _subscribeToProtectedEventMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._subscribeToProtectedEventMethodInvocationHistoryCollection = _subscribeToProtectedEventMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup(SubscribeToProtectedEventArguments arguments)
            {
                return FindMatchingInvocationImposterGroup(arguments) != null;
            }

            private SubscribeToProtectedEventMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup(SubscribeToProtectedEventArguments arguments)
            {
                foreach (var invocationImposterGroup in _invocationImposters)
                {
                    if (invocationImposterGroup.ArgumentsCriteria.Matches(arguments))
                        return invocationImposterGroup;
                }

                return null;
            }

            public void Invoke(global::System.EventHandler handler, SubscribeToProtectedEventDelegate? baseImplementation = null)
            {
                var arguments = new SubscribeToProtectedEventArguments(handler);
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup(arguments);
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual void ClassWithProtectedOverrideableMembers.SubscribeToProtectedEvent(EventHandler handler)");
                    }

                    matchingInvocationImposterGroup = SubscribeToProtectedEventMethodInvocationImposterGroup.Default;
                }

                try
                {
                    matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual void ClassWithProtectedOverrideableMembers.SubscribeToProtectedEvent(EventHandler handler)", handler, baseImplementation);
                    _subscribeToProtectedEventMethodInvocationHistoryCollection.Add(new SubscribeToProtectedEventMethodInvocationHistory(arguments, default));
                }
                catch (global::System.Exception ex)
                {
                    _subscribeToProtectedEventMethodInvocationHistoryCollection.Add(new SubscribeToProtectedEventMethodInvocationHistory(arguments, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : ISubscribeToProtectedEventMethodImposterBuilder, ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation
            {
                private readonly SubscribeToProtectedEventMethodImposter _imposter;
                private readonly SubscribeToProtectedEventMethodInvocationHistoryCollection _subscribeToProtectedEventMethodInvocationHistoryCollection;
                private readonly SubscribeToProtectedEventArgumentsCriteria _argumentsCriteria;
                private readonly SubscribeToProtectedEventMethodInvocationImposterGroup _invocationImposterGroup;
                private SubscribeToProtectedEventMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(SubscribeToProtectedEventMethodImposter _imposter, SubscribeToProtectedEventMethodInvocationHistoryCollection _subscribeToProtectedEventMethodInvocationHistoryCollection, SubscribeToProtectedEventArgumentsCriteria _argumentsCriteria)
                {
                    this._imposter = _imposter;
                    this._subscribeToProtectedEventMethodInvocationHistoryCollection = _subscribeToProtectedEventMethodInvocationHistoryCollection;
                    this._argumentsCriteria = _argumentsCriteria;
                    this._invocationImposterGroup = new SubscribeToProtectedEventMethodInvocationImposterGroup(_argumentsCriteria);
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation ISubscribeToProtectedEventMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws((global::System.EventHandler handler) =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation ISubscribeToProtectedEventMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws((global::System.EventHandler handler) =>
                    {
                        throw exception;
                    });
                    return this;
                }

                ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation ISubscribeToProtectedEventMethodInvocationImposterGroup.Throws(SubscribeToProtectedEventExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws((global::System.EventHandler handler) =>
                    {
                        throw exceptionGenerator.Invoke(handler);
                    });
                    return this;
                }

                ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation ISubscribeToProtectedEventMethodInvocationImposterGroupCallback.Callback(SubscribeToProtectedEventCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation ISubscribeToProtectedEventMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                ISubscribeToProtectedEventMethodInvocationImposterGroup ISubscribeToProtectedEventMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void SubscribeToProtectedEventInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _subscribeToProtectedEventMethodInvocationHistoryCollection.Count(_argumentsCriteria);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedProperty(string value)
        public delegate void WriteProtectedPropertyDelegate(string value);
        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedProperty(string value)
        public delegate void WriteProtectedPropertyCallbackDelegate(string value);
        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedProperty(string value)
        public delegate global::System.Exception WriteProtectedPropertyExceptionGeneratorDelegate(string value);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class WriteProtectedPropertyArguments
        {
            public string value;
            internal WriteProtectedPropertyArguments(string value)
            {
                this.value = value;
            }
        }

        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedProperty(string value)
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class WriteProtectedPropertyArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<string> value { get; }

            public WriteProtectedPropertyArgumentsCriteria(global::Imposter.Abstractions.Arg<string> value)
            {
                this.value = value;
            }

            public bool Matches(WriteProtectedPropertyArguments arguments)
            {
                return value.Matches(arguments.value);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedPropertyMethodInvocationHistory
        {
            bool Matches(WriteProtectedPropertyArgumentsCriteria criteria);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class WriteProtectedPropertyMethodInvocationHistory : IWriteProtectedPropertyMethodInvocationHistory
        {
            internal WriteProtectedPropertyArguments Arguments;
            internal global::System.Exception? Exception;
            public WriteProtectedPropertyMethodInvocationHistory(WriteProtectedPropertyArguments Arguments, global::System.Exception? Exception)
            {
                this.Arguments = Arguments;
                this.Exception = Exception;
            }

            public bool Matches(WriteProtectedPropertyArgumentsCriteria criteria)
            {
                return criteria.Matches(Arguments);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class WriteProtectedPropertyMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<IWriteProtectedPropertyMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<IWriteProtectedPropertyMethodInvocationHistory>();
            internal void Add(IWriteProtectedPropertyMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count(WriteProtectedPropertyArgumentsCriteria argumentsCriteria)
            {
                return _invocationHistory.Count(it => it.Matches(argumentsCriteria));
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class WriteProtectedPropertyMethodInvocationImposterGroup
        {
            internal static WriteProtectedPropertyMethodInvocationImposterGroup Default = new WriteProtectedPropertyMethodInvocationImposterGroup(new WriteProtectedPropertyArgumentsCriteria(global::Imposter.Abstractions.Arg<string>.Any()));
            internal WriteProtectedPropertyArgumentsCriteria ArgumentsCriteria { get; }

            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public WriteProtectedPropertyMethodInvocationImposterGroup(WriteProtectedPropertyArgumentsCriteria argumentsCriteria)
            {
                ArgumentsCriteria = argumentsCriteria;
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public void Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, string value, WriteProtectedPropertyDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                invocationImposter.Invoke(invocationBehavior, methodDisplayName, value, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default._resultGenerator = DefaultResultGenerator;
                }

                private WriteProtectedPropertyDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<WriteProtectedPropertyCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<WriteProtectedPropertyCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public void Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, string value, WriteProtectedPropertyDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    _resultGenerator.Invoke(value);
                    foreach (var callback in _callbacks)
                    {
                        callback(value);
                    }
                }

                internal void Callback(WriteProtectedPropertyCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Throws(WriteProtectedPropertyExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (string value) =>
                    {
                        throw exceptionGenerator(value);
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static void DefaultResultGenerator(string value)
                {
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedPropertyMethodInvocationImposterGroupCallback
        {
            IWriteProtectedPropertyMethodInvocationImposterGroupContinuation Callback(WriteProtectedPropertyCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedPropertyMethodInvocationImposterGroupContinuation : IWriteProtectedPropertyMethodInvocationImposterGroupCallback
        {
            IWriteProtectedPropertyMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedPropertyMethodInvocationImposterGroup : IWriteProtectedPropertyMethodInvocationImposterGroupCallback
        {
            IWriteProtectedPropertyMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            IWriteProtectedPropertyMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            IWriteProtectedPropertyMethodInvocationImposterGroupContinuation Throws(WriteProtectedPropertyExceptionGeneratorDelegate exceptionGenerator);
            IWriteProtectedPropertyMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface WriteProtectedPropertyInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedPropertyMethodImposterBuilder : IWriteProtectedPropertyMethodInvocationImposterGroup, IWriteProtectedPropertyMethodInvocationImposterGroupCallback, WriteProtectedPropertyInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class WriteProtectedPropertyMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<WriteProtectedPropertyMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<WriteProtectedPropertyMethodInvocationImposterGroup>();
            private readonly WriteProtectedPropertyMethodInvocationHistoryCollection _writeProtectedPropertyMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public WriteProtectedPropertyMethodImposter(WriteProtectedPropertyMethodInvocationHistoryCollection _writeProtectedPropertyMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._writeProtectedPropertyMethodInvocationHistoryCollection = _writeProtectedPropertyMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup(WriteProtectedPropertyArguments arguments)
            {
                return FindMatchingInvocationImposterGroup(arguments) != null;
            }

            private WriteProtectedPropertyMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup(WriteProtectedPropertyArguments arguments)
            {
                foreach (var invocationImposterGroup in _invocationImposters)
                {
                    if (invocationImposterGroup.ArgumentsCriteria.Matches(arguments))
                        return invocationImposterGroup;
                }

                return null;
            }

            public void Invoke(string value, WriteProtectedPropertyDelegate? baseImplementation = null)
            {
                var arguments = new WriteProtectedPropertyArguments(value);
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup(arguments);
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual void ClassWithProtectedOverrideableMembers.WriteProtectedProperty(string value)");
                    }

                    matchingInvocationImposterGroup = WriteProtectedPropertyMethodInvocationImposterGroup.Default;
                }

                try
                {
                    matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual void ClassWithProtectedOverrideableMembers.WriteProtectedProperty(string value)", value, baseImplementation);
                    _writeProtectedPropertyMethodInvocationHistoryCollection.Add(new WriteProtectedPropertyMethodInvocationHistory(arguments, default));
                }
                catch (global::System.Exception ex)
                {
                    _writeProtectedPropertyMethodInvocationHistoryCollection.Add(new WriteProtectedPropertyMethodInvocationHistory(arguments, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : IWriteProtectedPropertyMethodImposterBuilder, IWriteProtectedPropertyMethodInvocationImposterGroupContinuation
            {
                private readonly WriteProtectedPropertyMethodImposter _imposter;
                private readonly WriteProtectedPropertyMethodInvocationHistoryCollection _writeProtectedPropertyMethodInvocationHistoryCollection;
                private readonly WriteProtectedPropertyArgumentsCriteria _argumentsCriteria;
                private readonly WriteProtectedPropertyMethodInvocationImposterGroup _invocationImposterGroup;
                private WriteProtectedPropertyMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(WriteProtectedPropertyMethodImposter _imposter, WriteProtectedPropertyMethodInvocationHistoryCollection _writeProtectedPropertyMethodInvocationHistoryCollection, WriteProtectedPropertyArgumentsCriteria _argumentsCriteria)
                {
                    this._imposter = _imposter;
                    this._writeProtectedPropertyMethodInvocationHistoryCollection = _writeProtectedPropertyMethodInvocationHistoryCollection;
                    this._argumentsCriteria = _argumentsCriteria;
                    this._invocationImposterGroup = new WriteProtectedPropertyMethodInvocationImposterGroup(_argumentsCriteria);
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                IWriteProtectedPropertyMethodInvocationImposterGroupContinuation IWriteProtectedPropertyMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws((string value) =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                IWriteProtectedPropertyMethodInvocationImposterGroupContinuation IWriteProtectedPropertyMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws((string value) =>
                    {
                        throw exception;
                    });
                    return this;
                }

                IWriteProtectedPropertyMethodInvocationImposterGroupContinuation IWriteProtectedPropertyMethodInvocationImposterGroup.Throws(WriteProtectedPropertyExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws((string value) =>
                    {
                        throw exceptionGenerator.Invoke(value);
                    });
                    return this;
                }

                IWriteProtectedPropertyMethodInvocationImposterGroupContinuation IWriteProtectedPropertyMethodInvocationImposterGroupCallback.Callback(WriteProtectedPropertyCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                IWriteProtectedPropertyMethodInvocationImposterGroupContinuation IWriteProtectedPropertyMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                IWriteProtectedPropertyMethodInvocationImposterGroup IWriteProtectedPropertyMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void WriteProtectedPropertyInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _writeProtectedPropertyMethodInvocationHistoryCollection.Count(_argumentsCriteria);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedValue(int index, int value)
        public delegate void WriteProtectedValueDelegate(int index, int value);
        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedValue(int index, int value)
        public delegate void WriteProtectedValueCallbackDelegate(int index, int value);
        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedValue(int index, int value)
        public delegate global::System.Exception WriteProtectedValueExceptionGeneratorDelegate(int index, int value);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class WriteProtectedValueArguments
        {
            public int index;
            public int value;
            internal WriteProtectedValueArguments(int index, int value)
            {
                this.index = index;
                this.value = value;
            }
        }

        // virtual void ClassWithProtectedOverrideableMembers.WriteProtectedValue(int index, int value)
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public class WriteProtectedValueArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<int> index { get; }
            public global::Imposter.Abstractions.Arg<int> value { get; }

            public WriteProtectedValueArgumentsCriteria(global::Imposter.Abstractions.Arg<int> index, global::Imposter.Abstractions.Arg<int> value)
            {
                this.index = index;
                this.value = value;
            }

            public bool Matches(WriteProtectedValueArguments arguments)
            {
                return index.Matches(arguments.index) && value.Matches(arguments.value);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedValueMethodInvocationHistory
        {
            bool Matches(WriteProtectedValueArgumentsCriteria criteria);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class WriteProtectedValueMethodInvocationHistory : IWriteProtectedValueMethodInvocationHistory
        {
            internal WriteProtectedValueArguments Arguments;
            internal global::System.Exception? Exception;
            public WriteProtectedValueMethodInvocationHistory(WriteProtectedValueArguments Arguments, global::System.Exception? Exception)
            {
                this.Arguments = Arguments;
                this.Exception = Exception;
            }

            public bool Matches(WriteProtectedValueArgumentsCriteria criteria)
            {
                return criteria.Matches(Arguments);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class WriteProtectedValueMethodInvocationHistoryCollection
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<IWriteProtectedValueMethodInvocationHistory> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentStack<IWriteProtectedValueMethodInvocationHistory>();
            internal void Add(IWriteProtectedValueMethodInvocationHistory invocationHistory)
            {
                _invocationHistory.Push(invocationHistory);
            }

            internal int Count(WriteProtectedValueArgumentsCriteria argumentsCriteria)
            {
                return _invocationHistory.Count(it => it.Matches(argumentsCriteria));
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class WriteProtectedValueMethodInvocationImposterGroup
        {
            internal static WriteProtectedValueMethodInvocationImposterGroup Default = new WriteProtectedValueMethodInvocationImposterGroup(new WriteProtectedValueArgumentsCriteria(global::Imposter.Abstractions.Arg<int>.Any(), global::Imposter.Abstractions.Arg<int>.Any()));
            internal WriteProtectedValueArgumentsCriteria ArgumentsCriteria { get; }

            private readonly global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentQueue<MethodInvocationImposter>();
            private MethodInvocationImposter? _lastestInvocationImposter;
            public WriteProtectedValueMethodInvocationImposterGroup(WriteProtectedValueArgumentsCriteria argumentsCriteria)
            {
                ArgumentsCriteria = argumentsCriteria;
            }

            internal MethodInvocationImposter AddInvocationImposter()
            {
                MethodInvocationImposter invocationImposter = new MethodInvocationImposter();
                _invocationImposters.Enqueue(invocationImposter);
                return invocationImposter;
            }

            private MethodInvocationImposter? GetInvocationImposter()
            {
                if (_invocationImposters.TryDequeue(out var invocationImposter))
                {
                    if (!invocationImposter.IsEmpty)
                    {
                        _lastestInvocationImposter = invocationImposter;
                    }

                    return invocationImposter;
                }

                return _lastestInvocationImposter;
            }

            public void Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int index, int value, WriteProtectedValueDelegate? baseImplementation = null)
            {
                var invocationImposter = GetInvocationImposter();
                if (invocationImposter == null)
                {
                    if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    invocationImposter = MethodInvocationImposter.Default;
                }

                invocationImposter.Invoke(invocationBehavior, methodDisplayName, index, value, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class MethodInvocationImposter
            {
                internal static MethodInvocationImposter Default;
                static MethodInvocationImposter()
                {
                    Default = new MethodInvocationImposter();
                    Default._resultGenerator = DefaultResultGenerator;
                }

                private WriteProtectedValueDelegate? _resultGenerator;
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<WriteProtectedValueCallbackDelegate> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<WriteProtectedValueCallbackDelegate>();
                private bool _useBaseImplementation;
                internal bool IsEmpty => !_useBaseImplementation && ((_resultGenerator == null) && (_callbacks.Count == 0));

                public void Invoke(global::Imposter.Abstractions.ImposterMode invocationBehavior, string methodDisplayName, int index, int value, WriteProtectedValueDelegate? baseImplementation = null)
                {
                    if (_useBaseImplementation)
                    {
                        _resultGenerator = baseImplementation ?? throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                    }

                    if (_resultGenerator == null)
                    {
                        if (invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(methodDisplayName);
                        }

                        _resultGenerator = DefaultResultGenerator;
                    }

                    _resultGenerator.Invoke(index, value);
                    foreach (var callback in _callbacks)
                    {
                        callback(index, value);
                    }
                }

                internal void Callback(WriteProtectedValueCallbackDelegate callback)
                {
                    _callbacks.Enqueue(callback);
                }

                internal void Throws(WriteProtectedValueExceptionGeneratorDelegate exceptionGenerator)
                {
                    _useBaseImplementation = false;
                    _resultGenerator = (int index, int value) =>
                    {
                        throw exceptionGenerator(index, value);
                    };
                }

                internal void UseBaseImplementation()
                {
                    _useBaseImplementation = true;
                    _resultGenerator = null;
                }

                internal static void DefaultResultGenerator(int index, int value)
                {
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedValueMethodInvocationImposterGroupCallback
        {
            IWriteProtectedValueMethodInvocationImposterGroupContinuation Callback(WriteProtectedValueCallbackDelegate callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedValueMethodInvocationImposterGroupContinuation : IWriteProtectedValueMethodInvocationImposterGroupCallback
        {
            IWriteProtectedValueMethodInvocationImposterGroup Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedValueMethodInvocationImposterGroup : IWriteProtectedValueMethodInvocationImposterGroupCallback
        {
            IWriteProtectedValueMethodInvocationImposterGroupContinuation Throws<TException>()
                where TException : global::System.Exception, new();
            IWriteProtectedValueMethodInvocationImposterGroupContinuation Throws(global::System.Exception exception);
            IWriteProtectedValueMethodInvocationImposterGroupContinuation Throws(WriteProtectedValueExceptionGeneratorDelegate exceptionGenerator);
            IWriteProtectedValueMethodInvocationImposterGroupContinuation UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface WriteProtectedValueInvocationVerifier
        {
            void Called(Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IWriteProtectedValueMethodImposterBuilder : IWriteProtectedValueMethodInvocationImposterGroup, IWriteProtectedValueMethodInvocationImposterGroupCallback, WriteProtectedValueInvocationVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class WriteProtectedValueMethodImposter
        {
            private readonly global::System.Collections.Concurrent.ConcurrentStack<WriteProtectedValueMethodInvocationImposterGroup> _invocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<WriteProtectedValueMethodInvocationImposterGroup>();
            private readonly WriteProtectedValueMethodInvocationHistoryCollection _writeProtectedValueMethodInvocationHistoryCollection;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            public WriteProtectedValueMethodImposter(WriteProtectedValueMethodInvocationHistoryCollection _writeProtectedValueMethodInvocationHistoryCollection, global::Imposter.Abstractions.ImposterMode _invocationBehavior)
            {
                this._writeProtectedValueMethodInvocationHistoryCollection = _writeProtectedValueMethodInvocationHistoryCollection;
                this._invocationBehavior = _invocationBehavior;
            }

            public bool HasMatchingInvocationImposterGroup(WriteProtectedValueArguments arguments)
            {
                return FindMatchingInvocationImposterGroup(arguments) != null;
            }

            private WriteProtectedValueMethodInvocationImposterGroup? FindMatchingInvocationImposterGroup(WriteProtectedValueArguments arguments)
            {
                foreach (var invocationImposterGroup in _invocationImposters)
                {
                    if (invocationImposterGroup.ArgumentsCriteria.Matches(arguments))
                        return invocationImposterGroup;
                }

                return null;
            }

            public void Invoke(int index, int value, WriteProtectedValueDelegate? baseImplementation = null)
            {
                var arguments = new WriteProtectedValueArguments(index, value);
                var matchingInvocationImposterGroup = FindMatchingInvocationImposterGroup(arguments);
                if (matchingInvocationImposterGroup == default)
                {
                    if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException("virtual void ClassWithProtectedOverrideableMembers.WriteProtectedValue(int index, int value)");
                    }

                    matchingInvocationImposterGroup = WriteProtectedValueMethodInvocationImposterGroup.Default;
                }

                try
                {
                    matchingInvocationImposterGroup.Invoke(_invocationBehavior, "virtual void ClassWithProtectedOverrideableMembers.WriteProtectedValue(int index, int value)", index, value, baseImplementation);
                    _writeProtectedValueMethodInvocationHistoryCollection.Add(new WriteProtectedValueMethodInvocationHistory(arguments, default));
                }
                catch (global::System.Exception ex)
                {
                    _writeProtectedValueMethodInvocationHistoryCollection.Add(new WriteProtectedValueMethodInvocationHistory(arguments, ex));
                    throw;
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class Builder : IWriteProtectedValueMethodImposterBuilder, IWriteProtectedValueMethodInvocationImposterGroupContinuation
            {
                private readonly WriteProtectedValueMethodImposter _imposter;
                private readonly WriteProtectedValueMethodInvocationHistoryCollection _writeProtectedValueMethodInvocationHistoryCollection;
                private readonly WriteProtectedValueArgumentsCriteria _argumentsCriteria;
                private readonly WriteProtectedValueMethodInvocationImposterGroup _invocationImposterGroup;
                private WriteProtectedValueMethodInvocationImposterGroup.MethodInvocationImposter _currentInvocationImposter;
                public Builder(WriteProtectedValueMethodImposter _imposter, WriteProtectedValueMethodInvocationHistoryCollection _writeProtectedValueMethodInvocationHistoryCollection, WriteProtectedValueArgumentsCriteria _argumentsCriteria)
                {
                    this._imposter = _imposter;
                    this._writeProtectedValueMethodInvocationHistoryCollection = _writeProtectedValueMethodInvocationHistoryCollection;
                    this._argumentsCriteria = _argumentsCriteria;
                    this._invocationImposterGroup = new WriteProtectedValueMethodInvocationImposterGroup(_argumentsCriteria);
                    _imposter._invocationImposters.Push(_invocationImposterGroup);
                    this._currentInvocationImposter = this._invocationImposterGroup.AddInvocationImposter();
                }

                IWriteProtectedValueMethodInvocationImposterGroupContinuation IWriteProtectedValueMethodInvocationImposterGroup.Throws<TException>()
                {
                    _currentInvocationImposter.Throws((int index, int value) =>
                    {
                        throw new TException();
                    });
                    return this;
                }

                IWriteProtectedValueMethodInvocationImposterGroupContinuation IWriteProtectedValueMethodInvocationImposterGroup.Throws(global::System.Exception exception)
                {
                    _currentInvocationImposter.Throws((int index, int value) =>
                    {
                        throw exception;
                    });
                    return this;
                }

                IWriteProtectedValueMethodInvocationImposterGroupContinuation IWriteProtectedValueMethodInvocationImposterGroup.Throws(WriteProtectedValueExceptionGeneratorDelegate exceptionGenerator)
                {
                    _currentInvocationImposter.Throws((int index, int value) =>
                    {
                        throw exceptionGenerator.Invoke(index, value);
                    });
                    return this;
                }

                IWriteProtectedValueMethodInvocationImposterGroupContinuation IWriteProtectedValueMethodInvocationImposterGroupCallback.Callback(WriteProtectedValueCallbackDelegate callback)
                {
                    _currentInvocationImposter.Callback(callback);
                    return this;
                }

                IWriteProtectedValueMethodInvocationImposterGroupContinuation IWriteProtectedValueMethodInvocationImposterGroup.UseBaseImplementation()
                {
                    _currentInvocationImposter.UseBaseImplementation();
                    return this;
                }

                IWriteProtectedValueMethodInvocationImposterGroup IWriteProtectedValueMethodInvocationImposterGroupContinuation.Then()
                {
                    this._currentInvocationImposter = _invocationImposterGroup.AddInvocationImposter();
                    return this;
                }

                void WriteProtectedValueInvocationVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _writeProtectedValueMethodInvocationHistoryCollection.Count(_argumentsCriteria);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }
            }
        }

        public IProtectedVirtualPropertyPropertyBuilder ProtectedVirtualProperty => _ProtectedVirtualPropertyPropertyBuilderField;

        private readonly ProtectedVirtualPropertyPropertyBuilder _ProtectedVirtualPropertyPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterOutcomeBuilder
        {
            IProtectedVirtualPropertyPropertyGetterContinuationBuilder Returns(string value);
            IProtectedVirtualPropertyPropertyGetterContinuationBuilder Returns(global::System.Func<string> valueGenerator);
            IProtectedVirtualPropertyPropertyGetterContinuationBuilder Throws(global::System.Exception exception);
            IProtectedVirtualPropertyPropertyGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterCallbackBuilder
        {
            IProtectedVirtualPropertyPropertyGetterContinuationBuilder Callback(global::System.Action callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterContinuationBuilder : IProtectedVirtualPropertyPropertyGetterCallbackBuilder
        {
            IProtectedVirtualPropertyPropertyGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterFluentBuilder : IProtectedVirtualPropertyPropertyGetterOutcomeBuilder, IProtectedVirtualPropertyPropertyGetterContinuationBuilder
        {
            IProtectedVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterBuilder : IProtectedVirtualPropertyPropertyGetterOutcomeBuilder, IProtectedVirtualPropertyPropertyGetterCallbackBuilder, IProtectedVirtualPropertyPropertyGetterVerifier, IProtectedVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IProtectedVirtualPropertyPropertyGetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IProtectedVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertySetterCallbackBuilder
        {
            IProtectedVirtualPropertyPropertySetterContinuationBuilder Callback(global::System.Action<string> callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertySetterContinuationBuilder : IProtectedVirtualPropertyPropertySetterCallbackBuilder
        {
            IProtectedVirtualPropertyPropertySetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertySetterFluentBuilder : IProtectedVirtualPropertyPropertySetterCallbackBuilder, IProtectedVirtualPropertyPropertySetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertySetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertySetterBuilder : IProtectedVirtualPropertyPropertySetterCallbackBuilder, IProtectedVirtualPropertyPropertySetterVerifier, IProtectedVirtualPropertyPropertySetterUseBaseImplementationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertySetterUseBaseImplementationBuilder : IProtectedVirtualPropertyPropertySetterFluentBuilder
        {
            IProtectedVirtualPropertyPropertySetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualPropertyPropertyBuilder
        {
            IProtectedVirtualPropertyPropertyGetterBuilder Getter();
            IProtectedVirtualPropertyPropertySetterBuilder Setter(global::Imposter.Abstractions.Arg<string> criteria);
            IProtectedVirtualPropertyPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class ProtectedVirtualPropertyPropertyBuilder : IProtectedVirtualPropertyPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal SetterImposter _setterImposter;
            internal GetterImposterBuilder _getterImposterBuilder;
            internal ProtectedVirtualPropertyPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _getterImposterBuilder = new GetterImposterBuilder(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers.ProtectedVirtualProperty");
                _setterImposter = new SetterImposter(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers.ProtectedVirtualProperty");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal bool IsOn = true;
                internal bool HasValueSet = false;
                internal string BackingField = default;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class GetterImposterBuilder : IProtectedVirtualPropertyPropertyGetterBuilder, IProtectedVirtualPropertyPropertyGetterFluentBuilder, IProtectedVirtualPropertyPropertyGetterUseBaseImplementationBuilder
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action>();
                private volatile global::System.Func<global::System.Func<string>?, string> _lastReturnValue = _ => default !;
                private int _invocationCount;
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposterBuilder(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                private void AddReturnValue(global::System.Func<global::System.Func<string>?, string> valueGenerator)
                {
                    _defaultPropertyBehaviour.IsOn = false;
                    _returnValues.Enqueue(valueGenerator);
                    _hasConfiguredReturn = true;
                }

                IProtectedVirtualPropertyPropertyGetterContinuationBuilder IProtectedVirtualPropertyPropertyGetterOutcomeBuilder.Returns(string value)
                {
                    AddReturnValue((_) => value);
                    return this;
                }

                IProtectedVirtualPropertyPropertyGetterContinuationBuilder IProtectedVirtualPropertyPropertyGetterOutcomeBuilder.Returns(global::System.Func<string> valueGenerator)
                {
                    AddReturnValue((_) => valueGenerator());
                    return this;
                }

                IProtectedVirtualPropertyPropertyGetterContinuationBuilder IProtectedVirtualPropertyPropertyGetterOutcomeBuilder.Throws(global::System.Exception exception)
                {
                    AddReturnValue((_) => throw exception);
                    return this;
                }

                IProtectedVirtualPropertyPropertyGetterContinuationBuilder IProtectedVirtualPropertyPropertyGetterOutcomeBuilder.Throws<TException>()
                {
                    AddReturnValue((_) => throw new TException());
                    return this;
                }

                IProtectedVirtualPropertyPropertyGetterContinuationBuilder IProtectedVirtualPropertyPropertyGetterCallbackBuilder.Callback(global::System.Action callback)
                {
                    _callbacks.Enqueue(callback);
                    return this;
                }

                void IProtectedVirtualPropertyPropertyGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    if (!count.Matches(_invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, _invocationCount);
                }

                IProtectedVirtualPropertyPropertyGetterFluentBuilder IProtectedVirtualPropertyPropertyGetterContinuationBuilder.Then()
                {
                    return this;
                }

                IProtectedVirtualPropertyPropertyGetterUseBaseImplementationBuilder IProtectedVirtualPropertyPropertyGetterBuilder.Then()
                {
                    return this;
                }

                internal void EnableBaseImplementation()
                {
                    AddReturnValue((global::System.Func<string>? baseImplementation) =>
                    {
                        if (baseImplementation != null)
                            return baseImplementation();
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    });
                }

                IProtectedVirtualPropertyPropertyGetterFluentBuilder IProtectedVirtualPropertyPropertyGetterUseBaseImplementationBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                IProtectedVirtualPropertyPropertyGetterFluentBuilder IProtectedVirtualPropertyPropertyGetterFluentBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                internal string Get(global::System.Func<string>? baseImplementation = null)
                {
                    EnsureGetterConfigured();
                    global::System.Threading.Interlocked.Increment(ref _invocationCount);
                    foreach (var getterCallback in _callbacks)
                    {
                        getterCallback();
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        if (((_invocationCount == 1) && (baseImplementation != null)) && !_defaultPropertyBehaviour.HasValueSet)
                        {
                            _defaultPropertyBehaviour.BackingField = baseImplementation();
                        }

                        return _defaultPropertyBehaviour.BackingField;
                    }

                    var nextReturnValue = _lastReturnValue;
                    if (_returnValues.TryDequeue(out var returnValue) && (returnValue != null))
                    {
                        nextReturnValue = returnValue;
                        _lastReturnValue = returnValue;
                    }

                    return nextReturnValue(baseImplementation);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredReturn)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class SetterImposter
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>>();
                private readonly global::System.Collections.Concurrent.ConcurrentBag<string> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentBag<string>();
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredSetter;
                private bool _useBaseImplementation;
                internal SetterImposter(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                internal void Callback(global::Imposter.Abstractions.Arg<string> criteria, global::System.Action<string> callback)
                {
                    _callbacks.Enqueue(new global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>(criteria, callback));
                }

                void Called(global::Imposter.Abstractions.Arg<string> criteria, global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                }

                internal void UseBaseImplementation()
                {
                    _hasConfiguredSetter = true;
                    _useBaseImplementation = true;
                }

                internal void Set(string value, global::System.Action<string>? baseImplementation = null)
                {
                    EnsureSetterConfigured();
                    _invocationHistory.Add(value);
                    foreach (var(criteria, setterCallback)in _callbacks)
                    {
                        if (criteria.Matches(value))
                            setterCallback(value);
                    }

                    if (_useBaseImplementation)
                    {
                        if (baseImplementation != null)
                        {
                            baseImplementation(value);
                            return;
                        }
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        _defaultPropertyBehaviour.BackingField = value;
                        _defaultPropertyBehaviour.HasValueSet = true;
                    }
                }

                private void EnsureSetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredSetter)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                }

                internal void MarkConfigured()
                {
                    _hasConfiguredSetter = true;
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : IProtectedVirtualPropertyPropertySetterBuilder, IProtectedVirtualPropertyPropertySetterFluentBuilder, IProtectedVirtualPropertyPropertySetterUseBaseImplementationBuilder
                {
                    private readonly SetterImposter _setterImposter;
                    private readonly global::Imposter.Abstractions.Arg<string> _criteria;
                    internal Builder(SetterImposter _setterImposter, global::Imposter.Abstractions.Arg<string> _criteria)
                    {
                        this._setterImposter = _setterImposter;
                        this._criteria = _criteria;
                    }

                    IProtectedVirtualPropertyPropertySetterContinuationBuilder IProtectedVirtualPropertyPropertySetterCallbackBuilder.Callback(global::System.Action<string> callback)
                    {
                        _setterImposter.Callback(_criteria, callback);
                        return this;
                    }

                    void IProtectedVirtualPropertyPropertySetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _setterImposter.Called(_criteria, count);
                    }

                    IProtectedVirtualPropertyPropertySetterUseBaseImplementationBuilder IProtectedVirtualPropertyPropertySetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    IProtectedVirtualPropertyPropertySetterFluentBuilder IProtectedVirtualPropertyPropertySetterUseBaseImplementationBuilder.UseBaseImplementation()
                    {
                        _setterImposter.UseBaseImplementation();
                        return this;
                    }
                }
            }

            IProtectedVirtualPropertyPropertyGetterBuilder IProtectedVirtualPropertyPropertyBuilder.Getter()
            {
                return _getterImposterBuilder;
            }

            IProtectedVirtualPropertyPropertySetterBuilder IProtectedVirtualPropertyPropertyBuilder.Setter(global::Imposter.Abstractions.Arg<string> criteria)
            {
                _setterImposter.MarkConfigured();
                return new SetterImposter.Builder(_setterImposter, criteria);
            }

            IProtectedVirtualPropertyPropertyBuilder IProtectedVirtualPropertyPropertyBuilder.UseBaseImplementation()
            {
                _getterImposterBuilder.EnableBaseImplementation();
                _setterImposter.UseBaseImplementation();
                return this;
            }
        }

        public IProtectedVirtualEventEventImposterBuilder ProtectedVirtualEvent => _ProtectedVirtualEvent;

        private readonly ProtectedVirtualEventEventImposterBuilder _ProtectedVirtualEvent;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualEventEventImposterBuilder : IProtectedVirtualEventEventImposterSetupBuilder, IProtectedVirtualEventEventImposterVerificationBuilder
        {
            IProtectedVirtualEventEventImposterBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualEventEventImposterSetupBuilder
        {
            IProtectedVirtualEventEventImposterSetupBuilder Callback(global::System.EventHandler callback);
            IProtectedVirtualEventEventImposterSetupBuilder Raise(object sender, global::System.EventArgs e);
            IProtectedVirtualEventEventImposterSetupBuilder OnSubscribe(global::System.Action<global::System.EventHandler> interceptor);
            IProtectedVirtualEventEventImposterSetupBuilder OnUnsubscribe(global::System.Action<global::System.EventHandler> interceptor);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IProtectedVirtualEventEventImposterVerificationBuilder
        {
            IProtectedVirtualEventEventImposterVerificationBuilder Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count);
            IProtectedVirtualEventEventImposterVerificationBuilder Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count);
            IProtectedVirtualEventEventImposterVerificationBuilder Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::System.EventArgs> eCriteria, global::Imposter.Abstractions.Count count);
            IProtectedVirtualEventEventImposterVerificationBuilder HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler> handlerCriteria, global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal sealed class ProtectedVirtualEventEventImposterBuilder : IProtectedVirtualEventEventImposterBuilder, IProtectedVirtualEventEventImposterSetupBuilder, IProtectedVirtualEventEventImposterVerificationBuilder
        {
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _handlerOrder = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler, int> _handlerCounts = new global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler, int>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::System.EventArgs e)> _history = new global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::System.EventArgs e)>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _subscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _unsubscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>> _subscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>> _unsubscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler Handler, object sender, global::System.EventArgs e)> _handlerInvocations = new global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler Handler, object sender, global::System.EventArgs e)>();
            private bool _useBaseImplementation;
            private readonly string _eventDisplayName = "Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers.ProtectedVirtualEvent";
            internal ProtectedVirtualEventEventImposterBuilder()
            {
            }

            internal void Subscribe(global::System.EventHandler handler, global::System.Action? baseImplementation = null)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerOrder.Enqueue(handler);
                _handlerCounts.AddOrUpdate(handler, 1, (_, count) => count + 1);
                _subscribeHistory.Enqueue(handler);
                foreach (var interceptor in _subscribeInterceptors)
                {
                    interceptor(handler);
                }

                if (_useBaseImplementation)
                {
                    if (baseImplementation != null)
                    {
                        baseImplementation();
                    }
                    else
                        throw new global::Imposter.Abstractions.MissingImposterException(_eventDisplayName + " (event)");
                }
            }

            internal void Unsubscribe(global::System.EventHandler handler, global::System.Action? baseImplementation = null)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerCounts.AddOrUpdate(handler, 0, (_, count) =>
                {
                    if (count > 0)
                    {
                        return count - 1;
                    }

                    return 0;
                });
                _unsubscribeHistory.Enqueue(handler);
                foreach (var interceptor in _unsubscribeInterceptors)
                {
                    interceptor(handler);
                }

                if (_useBaseImplementation)
                {
                    if (baseImplementation != null)
                    {
                        baseImplementation();
                    }
                    else
                        throw new global::Imposter.Abstractions.MissingImposterException(_eventDisplayName + " (event)");
                }
            }

            IProtectedVirtualEventEventImposterSetupBuilder IProtectedVirtualEventEventImposterSetupBuilder.Callback(global::System.EventHandler callback)
            {
                ArgumentNullException.ThrowIfNull(callback);
                _callbacks.Enqueue(callback);
                return this;
            }

            IProtectedVirtualEventEventImposterSetupBuilder IProtectedVirtualEventEventImposterSetupBuilder.Raise(object sender, global::System.EventArgs e)
            {
                RaiseInternal(sender, e);
                return this;
            }

            IProtectedVirtualEventEventImposterVerificationBuilder IProtectedVirtualEventEventImposterVerificationBuilder.Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _subscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, "subscribed");
                return this;
            }

            IProtectedVirtualEventEventImposterVerificationBuilder IProtectedVirtualEventEventImposterVerificationBuilder.Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _unsubscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, "unsubscribed");
                return this;
            }

            IProtectedVirtualEventEventImposterSetupBuilder IProtectedVirtualEventEventImposterSetupBuilder.OnSubscribe(global::System.Action<global::System.EventHandler> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _subscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            IProtectedVirtualEventEventImposterSetupBuilder IProtectedVirtualEventEventImposterSetupBuilder.OnUnsubscribe(global::System.Action<global::System.EventHandler> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _unsubscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            IProtectedVirtualEventEventImposterVerificationBuilder IProtectedVirtualEventEventImposterVerificationBuilder.Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::System.EventArgs> eCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(senderCriteria);
                ArgumentNullException.ThrowIfNull(eCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _history.Count(entry => senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e));
                EnsureCountMatches(actual, count, "raised");
                return this;
            }

            IProtectedVirtualEventEventImposterVerificationBuilder IProtectedVirtualEventEventImposterVerificationBuilder.HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler> handlerCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(handlerCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _handlerInvocations.Count(entry => handlerCriteria.Matches(entry.Handler));
                EnsureCountMatches(actual, count, "invoked");
                return this;
            }

            private void RaiseInternal(object sender, global::System.EventArgs e)
            {
                _history.Enqueue((sender, e));
                foreach (var callback in _callbacks)
                {
                    callback(sender, e);
                }

                foreach (var handler in EnumerateActiveHandlers())
                {
                    _handlerInvocations.Enqueue((handler, sender, e));
                    handler(sender, e);
                }
            }

            private global::System.Collections.Generic.IEnumerable<global::System.EventHandler> EnumerateActiveHandlers()
            {
                global::System.Collections.Generic.Dictionary<global::System.EventHandler, int> budgets = new global::System.Collections.Generic.Dictionary<global::System.EventHandler, int>(_handlerCounts);
                foreach (var handler in _handlerOrder)
                {
                    int remaining;
                    if (budgets.TryGetValue(handler, out remaining))
                    {
                        if (remaining > 0)
                        {
                            budgets[handler] = remaining - 1;
                            yield return handler;
                        }
                    }
                }
            }

            private static void EnsureCountMatches(int actual, global::Imposter.Abstractions.Count expected, string action)
            {
                if (!expected.Matches(actual))
                {
                    throw new global::Imposter.Abstractions.VerificationFailedException(expected, actual);
                }
            }

            IProtectedVirtualEventEventImposterBuilder IProtectedVirtualEventEventImposterBuilder.UseBaseImplementation()
            {
                _useBaseImplementation = true;
                return this;
            }
        }

        private readonly IndexerIndexerBuilder _IndexerIndexer;
        public IIndexerIndexerBuilder this[global::Imposter.Abstractions.Arg<int> index] => new IndexerIndexerBuilder.InvocationBuilder(_IndexerIndexer, new IndexerIndexerArgumentsCriteria(index));
        public delegate int IndexerIndexerDelegate(int index);
        public delegate void IndexerIndexerGetterCallback(int index);
        public delegate void IndexerIndexerSetterCallback(int index, int value);
        public delegate global::System.Exception IndexerIndexerExceptionGenerator(int index);
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class IndexerIndexerArguments : global::System.IEquatable<IndexerIndexerArguments>
        {
            public int index;
            internal IndexerIndexerArguments(int index)
            {
                this.index = index;
            }

            public bool Equals(IndexerIndexerArguments? other)
            {
                if (other == null)
                {
                    return false;
                }

                return true && (index == other.index);
            }

            public override bool Equals(object? obj)
            {
                return obj is IndexerIndexerArguments other && Equals(other);
            }

            public override int GetHashCode()
            {
                global::System.HashCode hash = new global::System.HashCode();
                hash.Add(index);
                return hash.ToHashCode();
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class IndexerIndexerArgumentsCriteria
        {
            public global::Imposter.Abstractions.Arg<int> index;
            internal IndexerIndexerArgumentsCriteria(global::Imposter.Abstractions.Arg<int> index)
            {
                this.index = index;
            }

            public bool Matches(IndexerIndexerArguments arguments)
            {
                return index.Matches(arguments.index);
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class IndexerIndexerBuilder
        {
            private readonly DefaultIndexerIndexerBehaviour _IndexerDefaultIndexerBehaviour = new DefaultIndexerIndexerBehaviour();
            private readonly GetterImposter _getterImposter;
            private readonly SetterImposter _setterImposter;
            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultIndexerIndexerBehaviour
            {
                private bool _isOn = true;
                internal bool IsOn
                {
                    get
                    {
                        return global::System.Threading.Volatile.Read(ref _isOn);
                    }

                    set
                    {
                        global::System.Threading.Volatile.Write(ref _isOn, value);
                    }
                }

                internal global::System.Collections.Concurrent.ConcurrentDictionary<IndexerIndexerArguments, int> BackingField = new global::System.Collections.Concurrent.ConcurrentDictionary<IndexerIndexerArguments, int>();
                internal int Get(IndexerIndexerArguments arguments, global::System.Func<int>? baseImplementation = null)
                {
                    int value = default(int);
                    if (BackingField.TryGetValue(arguments, out value))
                        return value;
                    if (baseImplementation != null)
                        return baseImplementation();
                    return default(int);
                }

                internal void Set(IndexerIndexerArguments arguments, int value, global::System.Action? baseImplementation = null)
                {
                    if (baseImplementation != null)
                    {
                        baseImplementation();
                        return;
                    }

                    BackingField[arguments] = value;
                }
            }

            internal IndexerIndexerBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
            {
                this._getterImposter = new GetterImposter(_IndexerDefaultIndexerBehaviour, invocationBehavior, propertyDisplayName);
                this._setterImposter = new SetterImposter(_IndexerDefaultIndexerBehaviour, invocationBehavior, propertyDisplayName);
            }

            internal IIndexerIndexerGetterBuilder CreateGetter(IndexerIndexerArgumentsCriteria criteria)
            {
                return new GetterImposter.Builder(_getterImposter, criteria);
            }

            internal IIndexerIndexerSetterBuilder CreateSetter(IndexerIndexerArgumentsCriteria criteria)
            {
                _setterImposter.MarkConfigured();
                return new SetterImposter.Builder(_setterImposter, criteria);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class InvocationBuilder : IIndexerIndexerBuilder
            {
                private readonly IndexerIndexerBuilder _builder;
                private readonly IndexerIndexerArgumentsCriteria _criteria;
                internal InvocationBuilder(IndexerIndexerBuilder builder, IndexerIndexerArgumentsCriteria criteria)
                {
                    this._builder = builder;
                    this._criteria = criteria;
                }

                public IIndexerIndexerGetterBuilder Getter()
                {
                    return _builder.CreateGetter(_criteria);
                }

                public IIndexerIndexerSetterBuilder Setter()
                {
                    return _builder.CreateSetter(_criteria);
                }
            }

            internal int Get(int index, global::System.Func<int>? baseImplementation = null)
            {
                return _getterImposter.Get(index, baseImplementation);
            }

            internal void Set(int index, int value, global::System.Action? baseImplementation = null)
            {
                _setterImposter.Set(index, value, baseImplementation);
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            private sealed class GetterImposter
            {
                private readonly DefaultIndexerIndexerBehaviour _defaultBehaviour;
                private readonly global::System.Collections.Concurrent.ConcurrentStack<GetterInvocationImposter> _getterInvocationImposters = new global::System.Collections.Concurrent.ConcurrentStack<GetterInvocationImposter>();
                private readonly global::System.Collections.Concurrent.ConcurrentDictionary<IndexerIndexerArgumentsCriteria, GetterInvocationImposter> _setupLookup = new global::System.Collections.Concurrent.ConcurrentDictionary<IndexerIndexerArgumentsCriteria, GetterInvocationImposter>();
                private readonly global::System.Collections.Concurrent.ConcurrentBag<IndexerIndexerArguments> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentBag<IndexerIndexerArguments>();
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposter(DefaultIndexerIndexerBehaviour defaultBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultBehaviour = defaultBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                internal int Get(int index, global::System.Func<int>? baseImplementation = null)
                {
                    IndexerIndexerArguments arguments = new IndexerIndexerArguments(index);
                    try
                    {
                        var getterInvocationImposter = FindGetterInvocationImposter(arguments);
                        if (getterInvocationImposter is null)
                        {
                            EnsureGetterConfigured();
                            if (_defaultBehaviour.IsOn)
                                return _defaultBehaviour.Get(arguments, baseImplementation);
                            if (_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit)
                            {
                                throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                            }
                            else
                            {
                                return default(int);
                            }
                        }

                        return getterInvocationImposter.Invoke(arguments, baseImplementation);
                    }
                    finally
                    {
                        _invocationHistory.Add(arguments);
                    }
                }

                private GetterInvocationImposter? FindGetterInvocationImposter(IndexerIndexerArguments arguments)
                {
                    foreach (var getterInvocationImposter in _getterInvocationImposters)
                    {
                        if (getterInvocationImposter.Criteria.Matches(arguments))
                        {
                            return getterInvocationImposter;
                        }
                    }

                    return null;
                }

                private GetterInvocationImposter GetOrCreate(IndexerIndexerArgumentsCriteria criteria)
                {
                    return _setupLookup.GetOrAdd(criteria, CreateSetup);
                    GetterInvocationImposter CreateSetup(IndexerIndexerArgumentsCriteria key)
                    {
                        GetterInvocationImposter getterInvocationImposter = new GetterInvocationImposter(this, _defaultBehaviour, key);
                        _getterInvocationImposters.Push(getterInvocationImposter);
                        return getterInvocationImposter;
                    }
                }

                private void Called(IndexerIndexerArgumentsCriteria criteria, global::Imposter.Abstractions.Count count)
                {
                    int invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }

                internal string PropertyDisplayName => _propertyDisplayName;

                internal void MarkReturnConfigured()
                {
                    global::System.Threading.Volatile.Write(ref _hasConfiguredReturn, true);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !global::System.Threading.Volatile.Read(ref _hasConfiguredReturn))
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    }
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : IIndexerIndexerGetterBuilder, IIndexerIndexerGetterFluentBuilder
                {
                    private readonly GetterImposter _imposter;
                    private readonly IndexerIndexerArgumentsCriteria _criteria;
                    internal Builder(GetterImposter _imposter, IndexerIndexerArgumentsCriteria _criteria)
                    {
                        this._imposter = _imposter;
                        this._criteria = _criteria;
                    }

                    private GetterInvocationImposter InvocationImposter => _imposter.GetOrCreate(_criteria);

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.Returns(int value)
                    {
                        InvocationImposter.AddReturnValue(arguments => value);
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.Returns(global::System.Func<int> valueGenerator)
                    {
                        InvocationImposter.AddReturnValue(arguments => valueGenerator());
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.Returns(IndexerIndexerDelegate valueGenerator)
                    {
                        InvocationImposter.AddReturnValue(arguments => valueGenerator(arguments.index));
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.Throws(global::System.Exception exception)
                    {
                        InvocationImposter.AddReturnValue(arguments => throw exception);
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.Throws<TException>()
                    {
                        InvocationImposter.AddReturnValue(arguments => throw new TException());
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.Throws(IndexerIndexerExceptionGenerator exceptionGenerator)
                    {
                        InvocationImposter.AddReturnValue(arguments => throw exceptionGenerator(arguments.index));
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterCallbackBuilder.Callback(IndexerIndexerGetterCallback callback)
                    {
                        InvocationImposter.AddCallback(callback);
                        return this;
                    }

                    void IIndexerIndexerGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _imposter.Called(_criteria, count);
                    }

                    IIndexerIndexerGetterFluentBuilder IIndexerIndexerGetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    IIndexerIndexerGetterContinuationBuilder IIndexerIndexerGetterOutcomeBuilder.UseBaseImplementation()
                    {
                        InvocationImposter.UseBaseImplementation();
                        return this;
                    }
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                private sealed class GetterInvocationImposter
                {
                    private readonly GetterImposter _parent;
                    private readonly DefaultIndexerIndexerBehaviour _defaultBehaviour;
                    private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<IndexerIndexerArguments, global::System.Func<int>?, int>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<IndexerIndexerArguments, global::System.Func<int>?, int>>();
                    private readonly global::System.Collections.Concurrent.ConcurrentQueue<IndexerIndexerGetterCallback> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<IndexerIndexerGetterCallback>();
                    private volatile global::System.Func<IndexerIndexerArguments, global::System.Func<int>?, int>? _lastReturnValue;
                    private int _invocationCount;
                    private string _propertyDisplayName;
                    internal IndexerIndexerArgumentsCriteria Criteria { get; private set; }
                    internal int InvocationCount => global::System.Threading.Volatile.Read(ref _invocationCount);

                    internal GetterInvocationImposter(GetterImposter parent, DefaultIndexerIndexerBehaviour defaultBehaviour, IndexerIndexerArgumentsCriteria criteria)
                    {
                        this._parent = parent;
                        this._defaultBehaviour = defaultBehaviour;
                        this._propertyDisplayName = parent.PropertyDisplayName;
                        this.Criteria = criteria;
                    }

                    internal void AddReturnValue(global::System.Func<IndexerIndexerArguments, int> generator)
                    {
                        _defaultBehaviour.IsOn = false;
                        _returnValues.Enqueue((arguments, baseImplementation) => generator(arguments));
                        _parent.MarkReturnConfigured();
                    }

                    internal void AddCallback(IndexerIndexerGetterCallback callback)
                    {
                        _callbacks.Enqueue(callback);
                    }

                    internal int Invoke(IndexerIndexerArguments arguments, global::System.Func<int>? baseImplementation = null)
                    {
                        global::System.Threading.Interlocked.Increment(ref _invocationCount);
                        foreach (var callback in _callbacks)
                        {
                            callback(arguments.index);
                        }

                        global::System.Func<IndexerIndexerArguments, global::System.Func<int>?, int> generator = ResolveNextGenerator(arguments);
                        return generator(arguments, baseImplementation);
                    }

                    private global::System.Func<IndexerIndexerArguments, global::System.Func<int>?, int> ResolveNextGenerator(IndexerIndexerArguments arguments)
                    {
                        if (_defaultBehaviour.IsOn)
                        {
                            return (arguments, baseImplementation) => _defaultBehaviour.Get(arguments, baseImplementation);
                        }

                        _returnValues.TryDequeue(out var returnValue);
                        var nextReturnValue = returnValue ?? _lastReturnValue;
                        if (nextReturnValue == null)
                        {
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                        }

                        _lastReturnValue = nextReturnValue;
                        return nextReturnValue!;
                    }

                    internal void UseBaseImplementation()
                    {
                        _parent.MarkReturnConfigured();
                        _defaultBehaviour.IsOn = false;
                        _returnValues.Enqueue((arguments, baseImplementation) =>
                        {
                            if (baseImplementation == null)
                            {
                                throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                            }

                            return baseImplementation();
                        });
                        _lastReturnValue = null;
                    }
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            private sealed class SetterImposter
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<(IndexerIndexerArgumentsCriteria Criteria, IndexerIndexerSetterCallback Callback)> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<(IndexerIndexerArgumentsCriteria Criteria, IndexerIndexerSetterCallback Callback)>();
                private readonly global::System.Collections.Concurrent.ConcurrentBag<IndexerIndexerArguments> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentBag<IndexerIndexerArguments>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<IndexerIndexerArgumentsCriteria> _baseCriteria = new global::System.Collections.Concurrent.ConcurrentQueue<IndexerIndexerArgumentsCriteria>();
                private readonly DefaultIndexerIndexerBehaviour _defaultBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredSetter;
                internal SetterImposter(DefaultIndexerIndexerBehaviour defaultBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultBehaviour = defaultBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                public void Callback(IndexerIndexerArgumentsCriteria criteria, IndexerIndexerSetterCallback callback)
                {
                    _callbacks.Enqueue((criteria, callback));
                }

                public void Called(IndexerIndexerArgumentsCriteria criteria, global::Imposter.Abstractions.Count count)
                {
                    int invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                    {
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                    }
                }

                internal void Set(int index, int value, global::System.Action? baseImplementation = null)
                {
                    EnsureSetterConfigured();
                    IndexerIndexerArguments arguments = new IndexerIndexerArguments(index);
                    _invocationHistory.Add(arguments);
                    bool matchedCallback = false;
                    foreach (var registration in _callbacks)
                    {
                        if (registration.Criteria.Matches(arguments))
                        {
                            registration.Callback(arguments.index, value);
                            matchedCallback = true;
                        }
                    }

                    bool invokedBaseImplementation = false;
                    foreach (var criteria in _baseCriteria)
                    {
                        if (criteria.Matches(arguments))
                        {
                            if (baseImplementation == null)
                            {
                                throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                            }

                            baseImplementation();
                            invokedBaseImplementation = true;
                            break;
                        }
                    }

                    if (!invokedBaseImplementation && (!matchedCallback && _defaultBehaviour.IsOn))
                    {
                        _defaultBehaviour.Set(arguments, value, null);
                    }
                }

                private void EnsureSetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !global::System.Threading.Volatile.Read(ref _hasConfiguredSetter))
                    {
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                    }
                }

                internal void MarkConfigured()
                {
                    global::System.Threading.Volatile.Write(ref _hasConfiguredSetter, true);
                }

                public void UseBaseImplementation(IndexerIndexerArgumentsCriteria criteria)
                {
                    _baseCriteria.Enqueue(criteria);
                    MarkConfigured();
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : IIndexerIndexerSetterBuilder, IIndexerIndexerSetterFluentBuilder
                {
                    private readonly SetterImposter _setterImposter;
                    private readonly IndexerIndexerArgumentsCriteria _criteria;
                    internal Builder(SetterImposter _setterImposter, IndexerIndexerArgumentsCriteria _criteria)
                    {
                        this._setterImposter = _setterImposter;
                        this._criteria = _criteria;
                    }

                    IIndexerIndexerSetterContinuationBuilder IIndexerIndexerSetterCallbackBuilder.Callback(IndexerIndexerSetterCallback callback)
                    {
                        _setterImposter.Callback(_criteria, callback);
                        return this;
                    }

                    void IIndexerIndexerSetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _setterImposter.Called(_criteria, count);
                    }

                    IIndexerIndexerSetterFluentBuilder IIndexerIndexerSetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    IIndexerIndexerSetterFluentBuilder IIndexerIndexerSetterBuilder.UseBaseImplementation()
                    {
                        _setterImposter.UseBaseImplementation(_criteria);
                        return this;
                    }
                }
            }
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerGetterOutcomeBuilder
        {
            IIndexerIndexerGetterContinuationBuilder Returns(int value);
            IIndexerIndexerGetterContinuationBuilder Returns(global::System.Func<int> valueGenerator);
            IIndexerIndexerGetterContinuationBuilder Returns(IndexerIndexerDelegate valueGenerator);
            IIndexerIndexerGetterContinuationBuilder Throws(global::System.Exception exception);
            IIndexerIndexerGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
            IIndexerIndexerGetterContinuationBuilder Throws(IndexerIndexerExceptionGenerator exceptionGenerator);
            IIndexerIndexerGetterContinuationBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerGetterCallbackBuilder
        {
            IIndexerIndexerGetterContinuationBuilder Callback(IndexerIndexerGetterCallback callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerGetterContinuationBuilder : IIndexerIndexerGetterCallbackBuilder
        {
            IIndexerIndexerGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerGetterFluentBuilder : IIndexerIndexerGetterOutcomeBuilder, IIndexerIndexerGetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerGetterBuilder : IIndexerIndexerGetterOutcomeBuilder, IIndexerIndexerGetterCallbackBuilder, IIndexerIndexerGetterVerifier
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerSetterCallbackBuilder
        {
            IIndexerIndexerSetterContinuationBuilder Callback(IndexerIndexerSetterCallback callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerSetterContinuationBuilder : IIndexerIndexerSetterCallbackBuilder
        {
            IIndexerIndexerSetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerSetterFluentBuilder : IIndexerIndexerSetterCallbackBuilder, IIndexerIndexerSetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerSetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerSetterBuilder : IIndexerIndexerSetterCallbackBuilder, IIndexerIndexerSetterVerifier
        {
            IIndexerIndexerSetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IIndexerIndexerBuilder
        {
            IIndexerIndexerGetterBuilder Getter();
            IIndexerIndexerSetterBuilder Setter();
        }

        public ClassWithProtectedOverrideableMembersImposter(global::Imposter.Abstractions.ImposterMode invocationBehavior = global::Imposter.Abstractions.ImposterMode.Implicit)
        {
            this._protectedVirtualMethodMethodImposter = new ProtectedVirtualMethodMethodImposter(_protectedVirtualMethodMethodInvocationHistoryCollection, invocationBehavior);
            this._invokeProtectedMethodMethodImposter = new InvokeProtectedMethodMethodImposter(_invokeProtectedMethodMethodInvocationHistoryCollection, invocationBehavior);
            this._readProtectedPropertyMethodImposter = new ReadProtectedPropertyMethodImposter(_readProtectedPropertyMethodInvocationHistoryCollection, invocationBehavior);
            this._writeProtectedPropertyMethodImposter = new WriteProtectedPropertyMethodImposter(_writeProtectedPropertyMethodInvocationHistoryCollection, invocationBehavior);
            this._readProtectedValueMethodImposter = new ReadProtectedValueMethodImposter(_readProtectedValueMethodInvocationHistoryCollection, invocationBehavior);
            this._writeProtectedValueMethodImposter = new WriteProtectedValueMethodImposter(_writeProtectedValueMethodInvocationHistoryCollection, invocationBehavior);
            this._subscribeToProtectedEventMethodImposter = new SubscribeToProtectedEventMethodImposter(_subscribeToProtectedEventMethodInvocationHistoryCollection, invocationBehavior);
            this._ProtectedVirtualPropertyPropertyBuilderField = new ProtectedVirtualPropertyPropertyBuilder(invocationBehavior);
            this._ProtectedVirtualEvent = new ProtectedVirtualEventEventImposterBuilder();
            this._IndexerIndexer = new IndexerIndexerBuilder(invocationBehavior, "Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers.this[int index]");
            this._imposterInstance = new ImposterTargetInstance(this);
            this._invocationBehavior = invocationBehavior;
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ImposterTargetInstance : global::Imposter.Tests.Features.ClassImposter.Suts.ClassWithProtectedOverrideableMembers
        {
            private readonly ClassWithProtectedOverrideableMembersImposter _imposter;
            internal ImposterTargetInstance(ClassWithProtectedOverrideableMembersImposter _imposter) : base()
            {
                this._imposter = _imposter;
            }

            protected override int ProtectedVirtualMethod(int value)
            {
                return _imposter._protectedVirtualMethodMethodImposter.Invoke(value, base.ProtectedVirtualMethod);
            }

            public override int InvokeProtectedMethod(int value)
            {
                return _imposter._invokeProtectedMethodMethodImposter.Invoke(value, base.InvokeProtectedMethod);
            }

            public override string ReadProtectedProperty()
            {
                return _imposter._readProtectedPropertyMethodImposter.Invoke(base.ReadProtectedProperty);
            }

            public override void WriteProtectedProperty(string value)
            {
                _imposter._writeProtectedPropertyMethodImposter.Invoke(value, base.WriteProtectedProperty);
            }

            public override int ReadProtectedValue(int index)
            {
                return _imposter._readProtectedValueMethodImposter.Invoke(index, base.ReadProtectedValue);
            }

            public override void WriteProtectedValue(int index, int value)
            {
                _imposter._writeProtectedValueMethodImposter.Invoke(index, value, base.WriteProtectedValue);
            }

            public override void SubscribeToProtectedEvent(global::System.EventHandler handler)
            {
                _imposter._subscribeToProtectedEventMethodImposter.Invoke(handler, base.SubscribeToProtectedEvent);
            }

            protected override string ProtectedVirtualProperty
            {
                get
                {
                    return _imposter._ProtectedVirtualPropertyPropertyBuilderField._getterImposterBuilder.Get(() => base.ProtectedVirtualProperty);
                }

                set
                {
                    _imposter._ProtectedVirtualPropertyPropertyBuilderField._setterImposter.Set(value, (baseSetterValue) =>
                    {
                        base.ProtectedVirtualProperty = baseSetterValue;
                    });
                }
            }

            protected override event global::System.EventHandler? ProtectedVirtualEvent
            {
                add
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._ProtectedVirtualEvent.Subscribe(value, () =>
                    {
                        base.ProtectedVirtualEvent += value;
                    });
                }

                remove
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._ProtectedVirtualEvent.Unsubscribe(value, () =>
                    {
                        base.ProtectedVirtualEvent -= value;
                    });
                }
            }

            protected override int this[int index]
            {
                get
                {
                    return _imposter._IndexerIndexer.Get(index, () => base[index]);
                }

                set
                {
                    _imposter._IndexerIndexer.Set(index, value, () =>
                    {
                        base[index] = value;
                    });
                }
            }
        }
    }
}
#nullable restore
