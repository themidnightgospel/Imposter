// <auto-generated />
#nullable enable
#pragma warning disable CS8608
using global::System;
using global::System.Linq;
using global::System.Collections.Generic;
using global::System.Threading.Tasks;
using global::System.Diagnostics;
using global::System.Runtime.CompilerServices;
using global::Imposter.Abstractions;
using global::System.Collections.Concurrent;
using global::Imposter.Tests.Features.PropertyImposter;

namespace Imposter.Tests.Features.PropertyImposter
{
    [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
    public sealed class ClassWithVirtualPropertyImposter : global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty>
    {
        private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
        private ImposterTargetInstance _imposterInstance;
        global::Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty>.Instance()
        {
            return _imposterInstance;
        }

        public IVirtualPropertyPropertyBuilder VirtualProperty => _VirtualPropertyPropertyBuilderField;

        private readonly VirtualPropertyPropertyBuilder _VirtualPropertyPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterOutcomeBuilder
        {
            IVirtualPropertyPropertyGetterContinuationBuilder Returns(string value);
            IVirtualPropertyPropertyGetterContinuationBuilder Returns(global::System.Func<string> valueGenerator);
            IVirtualPropertyPropertyGetterContinuationBuilder Throws(global::System.Exception exception);
            IVirtualPropertyPropertyGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterCallbackBuilder
        {
            IVirtualPropertyPropertyGetterContinuationBuilder Callback(global::System.Action callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterContinuationBuilder : IVirtualPropertyPropertyGetterCallbackBuilder
        {
            IVirtualPropertyPropertyGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterFluentBuilder : IVirtualPropertyPropertyGetterOutcomeBuilder, IVirtualPropertyPropertyGetterContinuationBuilder
        {
            IVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterBuilder : IVirtualPropertyPropertyGetterOutcomeBuilder, IVirtualPropertyPropertyGetterCallbackBuilder, IVirtualPropertyPropertyGetterVerifier, IVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IVirtualPropertyPropertyGetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyGetterUseBaseImplementationBuilder
        {
            IVirtualPropertyPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertySetterCallbackBuilder
        {
            IVirtualPropertyPropertySetterContinuationBuilder Callback(global::System.Action<string> callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertySetterContinuationBuilder : IVirtualPropertyPropertySetterCallbackBuilder
        {
            IVirtualPropertyPropertySetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertySetterFluentBuilder : IVirtualPropertyPropertySetterCallbackBuilder, IVirtualPropertyPropertySetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertySetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertySetterBuilder : IVirtualPropertyPropertySetterCallbackBuilder, IVirtualPropertyPropertySetterVerifier, IVirtualPropertyPropertySetterUseBaseImplementationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertySetterUseBaseImplementationBuilder : IVirtualPropertyPropertySetterFluentBuilder
        {
            IVirtualPropertyPropertySetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyPropertyBuilder
        {
            IVirtualPropertyPropertyGetterBuilder Getter();
            IVirtualPropertyPropertySetterBuilder Setter(global::Imposter.Abstractions.Arg<string> criteria);
            IVirtualPropertyPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class VirtualPropertyPropertyBuilder : IVirtualPropertyPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal SetterImposter _setterImposter;
            internal GetterImposterBuilder _getterImposterBuilder;
            internal VirtualPropertyPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _getterImposterBuilder = new GetterImposterBuilder(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty.VirtualProperty");
                _setterImposter = new SetterImposter(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty.VirtualProperty");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal bool IsOn = true;
                internal bool HasValueSet = false;
                internal string BackingField = default;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class GetterImposterBuilder : IVirtualPropertyPropertyGetterBuilder, IVirtualPropertyPropertyGetterFluentBuilder, IVirtualPropertyPropertyGetterUseBaseImplementationBuilder
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action>();
                private global::System.Func<global::System.Func<string>?, string> _lastReturnValue = _ => default;
                private int _invocationCount;
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposterBuilder(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                private void AddReturnValue(global::System.Func<global::System.Func<string>?, string> valueGenerator)
                {
                    _defaultPropertyBehaviour.IsOn = false;
                    _returnValues.Enqueue(valueGenerator);
                    _hasConfiguredReturn = true;
                }

                IVirtualPropertyPropertyGetterContinuationBuilder IVirtualPropertyPropertyGetterOutcomeBuilder.Returns(string value)
                {
                    AddReturnValue((_) => value);
                    return this;
                }

                IVirtualPropertyPropertyGetterContinuationBuilder IVirtualPropertyPropertyGetterOutcomeBuilder.Returns(global::System.Func<string> valueGenerator)
                {
                    AddReturnValue((_) => valueGenerator());
                    return this;
                }

                IVirtualPropertyPropertyGetterContinuationBuilder IVirtualPropertyPropertyGetterOutcomeBuilder.Throws(global::System.Exception exception)
                {
                    AddReturnValue((_) => throw exception);
                    return this;
                }

                IVirtualPropertyPropertyGetterContinuationBuilder IVirtualPropertyPropertyGetterOutcomeBuilder.Throws<TException>()
                {
                    AddReturnValue((_) => throw new TException());
                    return this;
                }

                IVirtualPropertyPropertyGetterContinuationBuilder IVirtualPropertyPropertyGetterCallbackBuilder.Callback(global::System.Action callback)
                {
                    _callbacks.Enqueue(callback);
                    return this;
                }

                void IVirtualPropertyPropertyGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    if (!count.Matches(_invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, _invocationCount);
                }

                IVirtualPropertyPropertyGetterFluentBuilder IVirtualPropertyPropertyGetterContinuationBuilder.Then()
                {
                    return this;
                }

                IVirtualPropertyPropertyGetterUseBaseImplementationBuilder IVirtualPropertyPropertyGetterBuilder.Then()
                {
                    return this;
                }

                internal void EnableBaseImplementation()
                {
                    AddReturnValue((global::System.Func<string>? baseImplementation) =>
                    {
                        if (baseImplementation != null)
                            return baseImplementation();
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    });
                }

                IVirtualPropertyPropertyGetterFluentBuilder IVirtualPropertyPropertyGetterUseBaseImplementationBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                IVirtualPropertyPropertyGetterFluentBuilder IVirtualPropertyPropertyGetterFluentBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                internal string Get(global::System.Func<string>? baseImplementation = null)
                {
                    EnsureGetterConfigured();
                    global::System.Threading.Interlocked.Increment(ref _invocationCount);
                    foreach (var getterCallback in _callbacks)
                    {
                        getterCallback();
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        if (((_invocationCount == 1) && (baseImplementation != null)) && !_defaultPropertyBehaviour.HasValueSet)
                        {
                            _defaultPropertyBehaviour.BackingField = baseImplementation();
                        }

                        return _defaultPropertyBehaviour.BackingField;
                    }

                    if (_returnValues.TryDequeue(out var returnValue))
                        _lastReturnValue = returnValue;
                    var nextReturnValue = returnValue ?? _lastReturnValue;
                    if (nextReturnValue != null)
                        _lastReturnValue = nextReturnValue;
                    return nextReturnValue(baseImplementation);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredReturn)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class SetterImposter
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>>();
                private readonly global::System.Collections.Concurrent.ConcurrentBag<string> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentBag<string>();
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredSetter;
                private bool _useBaseImplementation;
                internal SetterImposter(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                internal void Callback(global::Imposter.Abstractions.Arg<string> criteria, global::System.Action<string> callback)
                {
                    _callbacks.Enqueue(new global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>(criteria, callback));
                }

                void Called(global::Imposter.Abstractions.Arg<string> criteria, global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                }

                internal void UseBaseImplementation()
                {
                    _hasConfiguredSetter = true;
                    _useBaseImplementation = true;
                }

                internal void Set(string value, global::System.Action<string>? baseImplementation = null)
                {
                    EnsureSetterConfigured();
                    _invocationHistory.Add(value);
                    foreach (var(criteria, setterCallback)in _callbacks)
                    {
                        if (criteria.Matches(value))
                            setterCallback(value);
                    }

                    if (_useBaseImplementation)
                    {
                        if (baseImplementation != null)
                        {
                            baseImplementation(value);
                            return;
                        }
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        _defaultPropertyBehaviour.BackingField = value;
                        _defaultPropertyBehaviour.HasValueSet = true;
                    }
                }

                private void EnsureSetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredSetter)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                }

                internal void MarkConfigured()
                {
                    _hasConfiguredSetter = true;
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : IVirtualPropertyPropertySetterBuilder, IVirtualPropertyPropertySetterFluentBuilder, IVirtualPropertyPropertySetterUseBaseImplementationBuilder
                {
                    private readonly SetterImposter _setterImposter;
                    private readonly global::Imposter.Abstractions.Arg<string> _criteria;
                    internal Builder(SetterImposter _setterImposter, global::Imposter.Abstractions.Arg<string> _criteria)
                    {
                        this._setterImposter = _setterImposter;
                        this._criteria = _criteria;
                    }

                    IVirtualPropertyPropertySetterContinuationBuilder IVirtualPropertyPropertySetterCallbackBuilder.Callback(global::System.Action<string> callback)
                    {
                        _setterImposter.Callback(_criteria, callback);
                        return this;
                    }

                    void IVirtualPropertyPropertySetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _setterImposter.Called(_criteria, count);
                    }

                    IVirtualPropertyPropertySetterUseBaseImplementationBuilder IVirtualPropertyPropertySetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    IVirtualPropertyPropertySetterFluentBuilder IVirtualPropertyPropertySetterUseBaseImplementationBuilder.UseBaseImplementation()
                    {
                        _setterImposter.UseBaseImplementation();
                        return this;
                    }
                }
            }

            IVirtualPropertyPropertyGetterBuilder IVirtualPropertyPropertyBuilder.Getter()
            {
                return _getterImposterBuilder;
            }

            IVirtualPropertyPropertySetterBuilder IVirtualPropertyPropertyBuilder.Setter(global::Imposter.Abstractions.Arg<string> criteria)
            {
                _setterImposter.MarkConfigured();
                return new SetterImposter.Builder(_setterImposter, criteria);
            }

            IVirtualPropertyPropertyBuilder IVirtualPropertyPropertyBuilder.UseBaseImplementation()
            {
                _getterImposterBuilder.EnableBaseImplementation();
                _setterImposter.UseBaseImplementation();
                return this;
            }
        }

        public IVirtualPropertyWithInitializerPropertyBuilder VirtualPropertyWithInitializer => _VirtualPropertyWithInitializerPropertyBuilderField;

        private readonly VirtualPropertyWithInitializerPropertyBuilder _VirtualPropertyWithInitializerPropertyBuilderField;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder Returns(string value);
            IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder Returns(global::System.Func<string> valueGenerator);
            IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder Throws(global::System.Exception exception);
            IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder Throws<TException>()
                where TException : Exception, new();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterCallbackBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder Callback(global::System.Action callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder : IVirtualPropertyWithInitializerPropertyGetterCallbackBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterFluentBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterFluentBuilder : IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder, IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterBuilder : IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder, IVirtualPropertyWithInitializerPropertyGetterCallbackBuilder, IVirtualPropertyWithInitializerPropertyGetterVerifier, IVirtualPropertyWithInitializerPropertyGetterUseBaseImplementationBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyGetterUseBaseImplementationBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertySetterCallbackBuilder
        {
            IVirtualPropertyWithInitializerPropertySetterContinuationBuilder Callback(global::System.Action<string> callback);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertySetterContinuationBuilder : IVirtualPropertyWithInitializerPropertySetterCallbackBuilder
        {
            IVirtualPropertyWithInitializerPropertySetterUseBaseImplementationBuilder Then();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertySetterFluentBuilder : IVirtualPropertyWithInitializerPropertySetterCallbackBuilder, IVirtualPropertyWithInitializerPropertySetterContinuationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertySetterVerifier
        {
            void Called(global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertySetterBuilder : IVirtualPropertyWithInitializerPropertySetterCallbackBuilder, IVirtualPropertyWithInitializerPropertySetterVerifier, IVirtualPropertyWithInitializerPropertySetterUseBaseImplementationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertySetterUseBaseImplementationBuilder : IVirtualPropertyWithInitializerPropertySetterFluentBuilder
        {
            IVirtualPropertyWithInitializerPropertySetterFluentBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IVirtualPropertyWithInitializerPropertyBuilder
        {
            IVirtualPropertyWithInitializerPropertyGetterBuilder Getter();
            IVirtualPropertyWithInitializerPropertySetterBuilder Setter(global::Imposter.Abstractions.Arg<string> criteria);
            IVirtualPropertyWithInitializerPropertyBuilder UseBaseImplementation();
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal class VirtualPropertyWithInitializerPropertyBuilder : IVirtualPropertyWithInitializerPropertyBuilder
        {
            private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
            private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
            internal SetterImposter _setterImposter;
            internal GetterImposterBuilder _getterImposterBuilder;
            internal VirtualPropertyWithInitializerPropertyBuilder(global::Imposter.Abstractions.ImposterMode invocationBehavior)
            {
                _defaultPropertyBehaviour = new DefaultPropertyBehaviour();
                _invocationBehavior = invocationBehavior;
                _getterImposterBuilder = new GetterImposterBuilder(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty.VirtualPropertyWithInitializer");
                _setterImposter = new SetterImposter(_defaultPropertyBehaviour, _invocationBehavior, "Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty.VirtualPropertyWithInitializer");
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class DefaultPropertyBehaviour
            {
                internal bool IsOn = true;
                internal bool HasValueSet = false;
                internal string BackingField = default;
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class GetterImposterBuilder : IVirtualPropertyWithInitializerPropertyGetterBuilder, IVirtualPropertyWithInitializerPropertyGetterFluentBuilder, IVirtualPropertyWithInitializerPropertyGetterUseBaseImplementationBuilder
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>> _returnValues = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Func<global::System.Func<string>?, string>>();
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action>();
                private global::System.Func<global::System.Func<string>?, string> _lastReturnValue = _ => default;
                private int _invocationCount;
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredReturn;
                internal GetterImposterBuilder(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                private void AddReturnValue(global::System.Func<global::System.Func<string>?, string> valueGenerator)
                {
                    _defaultPropertyBehaviour.IsOn = false;
                    _returnValues.Enqueue(valueGenerator);
                    _hasConfiguredReturn = true;
                }

                IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder.Returns(string value)
                {
                    AddReturnValue((_) => value);
                    return this;
                }

                IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder.Returns(global::System.Func<string> valueGenerator)
                {
                    AddReturnValue((_) => valueGenerator());
                    return this;
                }

                IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder.Throws(global::System.Exception exception)
                {
                    AddReturnValue((_) => throw exception);
                    return this;
                }

                IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder IVirtualPropertyWithInitializerPropertyGetterOutcomeBuilder.Throws<TException>()
                {
                    AddReturnValue((_) => throw new TException());
                    return this;
                }

                IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder IVirtualPropertyWithInitializerPropertyGetterCallbackBuilder.Callback(global::System.Action callback)
                {
                    _callbacks.Enqueue(callback);
                    return this;
                }

                void IVirtualPropertyWithInitializerPropertyGetterVerifier.Called(global::Imposter.Abstractions.Count count)
                {
                    if (!count.Matches(_invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, _invocationCount);
                }

                IVirtualPropertyWithInitializerPropertyGetterFluentBuilder IVirtualPropertyWithInitializerPropertyGetterContinuationBuilder.Then()
                {
                    return this;
                }

                IVirtualPropertyWithInitializerPropertyGetterUseBaseImplementationBuilder IVirtualPropertyWithInitializerPropertyGetterBuilder.Then()
                {
                    return this;
                }

                internal void EnableBaseImplementation()
                {
                    AddReturnValue((global::System.Func<string>? baseImplementation) =>
                    {
                        if (baseImplementation != null)
                            return baseImplementation();
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                    });
                }

                IVirtualPropertyWithInitializerPropertyGetterFluentBuilder IVirtualPropertyWithInitializerPropertyGetterUseBaseImplementationBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                IVirtualPropertyWithInitializerPropertyGetterFluentBuilder IVirtualPropertyWithInitializerPropertyGetterFluentBuilder.UseBaseImplementation()
                {
                    EnableBaseImplementation();
                    return this;
                }

                internal string Get(global::System.Func<string>? baseImplementation = null)
                {
                    EnsureGetterConfigured();
                    global::System.Threading.Interlocked.Increment(ref _invocationCount);
                    foreach (var getterCallback in _callbacks)
                    {
                        getterCallback();
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        if (((_invocationCount == 1) && (baseImplementation != null)) && !_defaultPropertyBehaviour.HasValueSet)
                        {
                            _defaultPropertyBehaviour.BackingField = baseImplementation();
                        }

                        return _defaultPropertyBehaviour.BackingField;
                    }

                    if (_returnValues.TryDequeue(out var returnValue))
                        _lastReturnValue = returnValue;
                    var nextReturnValue = returnValue ?? _lastReturnValue;
                    if (nextReturnValue != null)
                        _lastReturnValue = nextReturnValue;
                    return nextReturnValue(baseImplementation);
                }

                private void EnsureGetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredReturn)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (getter)");
                }
            }

            [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
            internal class SetterImposter
            {
                private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>>();
                private readonly global::System.Collections.Concurrent.ConcurrentBag<string> _invocationHistory = new global::System.Collections.Concurrent.ConcurrentBag<string>();
                private readonly DefaultPropertyBehaviour _defaultPropertyBehaviour;
                private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
                private readonly string _propertyDisplayName;
                private bool _hasConfiguredSetter;
                private bool _useBaseImplementation;
                internal SetterImposter(DefaultPropertyBehaviour _defaultPropertyBehaviour, global::Imposter.Abstractions.ImposterMode invocationBehavior, string propertyDisplayName)
                {
                    this._defaultPropertyBehaviour = _defaultPropertyBehaviour;
                    this._invocationBehavior = invocationBehavior;
                    this._propertyDisplayName = propertyDisplayName;
                }

                internal void Callback(global::Imposter.Abstractions.Arg<string> criteria, global::System.Action<string> callback)
                {
                    _callbacks.Enqueue(new global::System.Tuple<global::Imposter.Abstractions.Arg<string>, global::System.Action<string>>(criteria, callback));
                }

                void Called(global::Imposter.Abstractions.Arg<string> criteria, global::Imposter.Abstractions.Count count)
                {
                    var invocationCount = _invocationHistory.Count(criteria.Matches);
                    if (!count.Matches(invocationCount))
                        throw new global::Imposter.Abstractions.VerificationFailedException(count, invocationCount);
                }

                internal void UseBaseImplementation()
                {
                    _hasConfiguredSetter = true;
                    _useBaseImplementation = true;
                }

                internal void Set(string value, global::System.Action<string>? baseImplementation = null)
                {
                    EnsureSetterConfigured();
                    _invocationHistory.Add(value);
                    foreach (var(criteria, setterCallback)in _callbacks)
                    {
                        if (criteria.Matches(value))
                            setterCallback(value);
                    }

                    if (_useBaseImplementation)
                    {
                        if (baseImplementation != null)
                        {
                            baseImplementation(value);
                            return;
                        }
                        else
                            throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                    }

                    if (_defaultPropertyBehaviour.IsOn)
                    {
                        _defaultPropertyBehaviour.BackingField = value;
                        _defaultPropertyBehaviour.HasValueSet = true;
                    }
                }

                private void EnsureSetterConfigured()
                {
                    if ((_invocationBehavior == global::Imposter.Abstractions.ImposterMode.Explicit) && !_hasConfiguredSetter)
                        throw new global::Imposter.Abstractions.MissingImposterException(_propertyDisplayName + " (setter)");
                }

                internal void MarkConfigured()
                {
                    _hasConfiguredSetter = true;
                }

                [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
                internal class Builder : IVirtualPropertyWithInitializerPropertySetterBuilder, IVirtualPropertyWithInitializerPropertySetterFluentBuilder, IVirtualPropertyWithInitializerPropertySetterUseBaseImplementationBuilder
                {
                    private readonly SetterImposter _setterImposter;
                    private readonly global::Imposter.Abstractions.Arg<string> _criteria;
                    internal Builder(SetterImposter _setterImposter, global::Imposter.Abstractions.Arg<string> _criteria)
                    {
                        this._setterImposter = _setterImposter;
                        this._criteria = _criteria;
                    }

                    IVirtualPropertyWithInitializerPropertySetterContinuationBuilder IVirtualPropertyWithInitializerPropertySetterCallbackBuilder.Callback(global::System.Action<string> callback)
                    {
                        _setterImposter.Callback(_criteria, callback);
                        return this;
                    }

                    void IVirtualPropertyWithInitializerPropertySetterVerifier.Called(global::Imposter.Abstractions.Count count)
                    {
                        _setterImposter.Called(_criteria, count);
                    }

                    IVirtualPropertyWithInitializerPropertySetterUseBaseImplementationBuilder IVirtualPropertyWithInitializerPropertySetterContinuationBuilder.Then()
                    {
                        return this;
                    }

                    IVirtualPropertyWithInitializerPropertySetterFluentBuilder IVirtualPropertyWithInitializerPropertySetterUseBaseImplementationBuilder.UseBaseImplementation()
                    {
                        _setterImposter.UseBaseImplementation();
                        return this;
                    }
                }
            }

            IVirtualPropertyWithInitializerPropertyGetterBuilder IVirtualPropertyWithInitializerPropertyBuilder.Getter()
            {
                return _getterImposterBuilder;
            }

            IVirtualPropertyWithInitializerPropertySetterBuilder IVirtualPropertyWithInitializerPropertyBuilder.Setter(global::Imposter.Abstractions.Arg<string> criteria)
            {
                _setterImposter.MarkConfigured();
                return new SetterImposter.Builder(_setterImposter, criteria);
            }

            IVirtualPropertyWithInitializerPropertyBuilder IVirtualPropertyWithInitializerPropertyBuilder.UseBaseImplementation()
            {
                _getterImposterBuilder.EnableBaseImplementation();
                _setterImposter.UseBaseImplementation();
                return this;
            }
        }

        public ClassWithVirtualPropertyImposter(global::Imposter.Abstractions.ImposterMode invocationBehavior = global::Imposter.Abstractions.ImposterMode.Implicit)
        {
            this._VirtualPropertyPropertyBuilderField = new VirtualPropertyPropertyBuilder(invocationBehavior);
            this._VirtualPropertyWithInitializerPropertyBuilderField = new VirtualPropertyWithInitializerPropertyBuilder(invocationBehavior);
            this._imposterInstance = new ImposterTargetInstance(this);
            this._invocationBehavior = invocationBehavior;
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ImposterTargetInstance : global::Imposter.Tests.Features.PropertyImposter.ClassWithVirtualProperty
        {
            private readonly ClassWithVirtualPropertyImposter _imposter;
            internal ImposterTargetInstance(ClassWithVirtualPropertyImposter _imposter) : base()
            {
                this._imposter = _imposter;
            }

            public override string VirtualProperty
            {
                get
                {
                    return _imposter._VirtualPropertyPropertyBuilderField._getterImposterBuilder.Get(() => base.VirtualProperty);
                }

                set
                {
                    _imposter._VirtualPropertyPropertyBuilderField._setterImposter.Set(value, (baseSetterValue) =>
                    {
                        base.VirtualProperty = baseSetterValue;
                    });
                }
            }

            public override string VirtualPropertyWithInitializer
            {
                get
                {
                    return _imposter._VirtualPropertyWithInitializerPropertyBuilderField._getterImposterBuilder.Get(() => base.VirtualPropertyWithInitializer);
                }

                set
                {
                    _imposter._VirtualPropertyWithInitializerPropertyBuilderField._setterImposter.Set(value, (baseSetterValue) =>
                    {
                        base.VirtualPropertyWithInitializer = baseSetterValue;
                    });
                }
            }
        }
    }
}
#nullable restore
#pragma warning restore CS8608
