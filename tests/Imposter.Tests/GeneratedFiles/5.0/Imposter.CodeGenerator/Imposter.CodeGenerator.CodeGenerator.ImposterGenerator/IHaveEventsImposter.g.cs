// <auto-generated />
#nullable enable
using global::System;
using global::System.Linq;
using global::System.Collections.Generic;
using global::System.Threading.Tasks;
using global::System.Diagnostics;
using global::System.Runtime.CompilerServices;
using global::Imposter.Abstractions;
using global::System.Collections.Concurrent;
using global::Imposter.Tests.Features.OpenGenericImposter;

namespace Imposter.Tests.Features.OpenGenericImposter
{
    [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
    public sealed class IHaveEventsImposter<T> : global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.OpenGenericImposter.IHaveEvents<T>> where T : class
    {
        private readonly global::Imposter.Abstractions.ImposterMode _invocationBehavior;
        private ImposterTargetInstance _imposterInstance;
        global::Imposter.Tests.Features.OpenGenericImposter.IHaveEvents<T> global::Imposter.Abstractions.IHaveImposterInstance<global::Imposter.Tests.Features.OpenGenericImposter.IHaveEvents<T>>.Instance()
        {
            return _imposterInstance;
        }

        public IDiagnosticPayloadPublishedEventImposterBuilder DiagnosticPayloadPublished => _DiagnosticPayloadPublished;

        private readonly DiagnosticPayloadPublishedEventImposterBuilder _DiagnosticPayloadPublished;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IDiagnosticPayloadPublishedEventImposterBuilder : IDiagnosticPayloadPublishedEventImposterSetupBuilder, IDiagnosticPayloadPublishedEventImposterVerificationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IDiagnosticPayloadPublishedEventImposterSetupBuilder
        {
            IDiagnosticPayloadPublishedEventImposterSetupBuilder Callback(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> callback);
            IDiagnosticPayloadPublishedEventImposterSetupBuilder Raise(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e);
            IDiagnosticPayloadPublishedEventImposterSetupBuilder OnSubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor);
            IDiagnosticPayloadPublishedEventImposterSetupBuilder OnUnsubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IDiagnosticPayloadPublishedEventImposterVerificationBuilder
        {
            IDiagnosticPayloadPublishedEventImposterVerificationBuilder Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count);
            IDiagnosticPayloadPublishedEventImposterVerificationBuilder Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count);
            IDiagnosticPayloadPublishedEventImposterVerificationBuilder Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> eCriteria, global::Imposter.Abstractions.Count count);
            IDiagnosticPayloadPublishedEventImposterVerificationBuilder HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> handlerCriteria, global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal sealed class DiagnosticPayloadPublishedEventImposterBuilder : IDiagnosticPayloadPublishedEventImposterBuilder, IDiagnosticPayloadPublishedEventImposterSetupBuilder, IDiagnosticPayloadPublishedEventImposterVerificationBuilder
        {
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _handlerOrder = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int> _handlerCounts = new global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _subscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _unsubscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>> _subscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>> _unsubscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)> _history = new global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> Handler, object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)> _handlerInvocations = new global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> Handler, object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)>();
            internal DiagnosticPayloadPublishedEventImposterBuilder()
            {
            }

            internal void Subscribe(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> handler)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerOrder.Enqueue(handler);
                _handlerCounts.AddOrUpdate(handler, 1, (_, count) => count + 1);
                _subscribeHistory.Enqueue(handler);
                foreach (var interceptor in _subscribeInterceptors)
                {
                    interceptor(handler);
                }
            }

            internal void Unsubscribe(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> handler)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerCounts.AddOrUpdate(handler, 0, (_, count) =>
                {
                    if (count > 0)
                    {
                        return count - 1;
                    }

                    return 0;
                });
                _unsubscribeHistory.Enqueue(handler);
                foreach (var interceptor in _unsubscribeInterceptors)
                {
                    interceptor(handler);
                }
            }

            IDiagnosticPayloadPublishedEventImposterSetupBuilder IDiagnosticPayloadPublishedEventImposterSetupBuilder.Callback(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> callback)
            {
                ArgumentNullException.ThrowIfNull(callback);
                _callbacks.Enqueue(callback);
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterSetupBuilder IDiagnosticPayloadPublishedEventImposterSetupBuilder.Raise(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)
            {
                RaiseInternal(sender, e);
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterVerificationBuilder IDiagnosticPayloadPublishedEventImposterVerificationBuilder.Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _subscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _subscribeHistory)
                    {
                        if (criteria.Matches(entry))
                        {
                            performedInvocations.Add("DiagnosticPayloadPublished subscribed " + FormatValue("DiagnosticPayloadPublished") + " handler: " + FormatValue(entry));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterVerificationBuilder IDiagnosticPayloadPublishedEventImposterVerificationBuilder.Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _unsubscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _unsubscribeHistory)
                    {
                        if (criteria.Matches(entry))
                        {
                            performedInvocations.Add("DiagnosticPayloadPublished unsubscribed " + FormatValue("DiagnosticPayloadPublished") + " handler: " + FormatValue(entry));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterSetupBuilder IDiagnosticPayloadPublishedEventImposterSetupBuilder.OnSubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _subscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterSetupBuilder IDiagnosticPayloadPublishedEventImposterSetupBuilder.OnUnsubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _unsubscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterVerificationBuilder IDiagnosticPayloadPublishedEventImposterVerificationBuilder.Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> eCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(senderCriteria);
                ArgumentNullException.ThrowIfNull(eCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _history.Count(entry => senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _history)
                    {
                        if (senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e))
                        {
                            performedInvocations.Add("DiagnosticPayloadPublished raised " + FormatValue("DiagnosticPayloadPublished") + " sender: " + FormatValue(entry.sender) + " e: " + FormatValue(entry.e));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            IDiagnosticPayloadPublishedEventImposterVerificationBuilder IDiagnosticPayloadPublishedEventImposterVerificationBuilder.HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> handlerCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(handlerCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _handlerInvocations.Count(entry => handlerCriteria.Matches(entry.Handler));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _handlerInvocations)
                    {
                        if (handlerCriteria.Matches(entry.Handler))
                        {
                            performedInvocations.Add("DiagnosticPayloadPublished handler invoked " + FormatValue("DiagnosticPayloadPublished") + " handler: " + FormatValue(entry.Handler) + " sender: " + FormatValue(entry.sender) + " e: " + FormatValue(entry.e));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            private void RaiseInternal(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)
            {
                _history.Enqueue((sender, e));
                foreach (var callback in _callbacks)
                {
                    callback(sender, e);
                }

                foreach (var handler in EnumerateActiveHandlers())
                {
                    _handlerInvocations.Enqueue((handler, sender, e));
                    handler(sender, e);
                }
            }

            private global::System.Collections.Generic.IEnumerable<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> EnumerateActiveHandlers()
            {
                global::System.Collections.Generic.Dictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int> budgets = new global::System.Collections.Generic.Dictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int>(_handlerCounts);
                foreach (var handler in _handlerOrder)
                {
                    int remaining;
                    if (budgets.TryGetValue(handler, out remaining))
                    {
                        if (remaining > 0)
                        {
                            budgets[handler] = remaining - 1;
                            yield return handler;
                        }
                    }
                }
            }

            private static void EnsureCountMatches(int actual, global::Imposter.Abstractions.Count expected, global::System.Func<string> performedInvocationsFactory)
            {
                if (!expected.Matches(actual))
                {
                    throw new global::Imposter.Abstractions.VerificationFailedException(expected, actual, performedInvocationsFactory());
                }
            }

            private static string FormatValue(object? value)
            {
                return "<" + (value?.ToString() ?? "null") + ">";
            }
        }

        public ILegacyPayloadAvailableEventImposterBuilder LegacyPayloadAvailable => _LegacyPayloadAvailable;

        private readonly LegacyPayloadAvailableEventImposterBuilder _LegacyPayloadAvailable;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ILegacyPayloadAvailableEventImposterBuilder : ILegacyPayloadAvailableEventImposterSetupBuilder, ILegacyPayloadAvailableEventImposterVerificationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ILegacyPayloadAvailableEventImposterSetupBuilder
        {
            ILegacyPayloadAvailableEventImposterSetupBuilder Callback(global::System.EventHandler callback);
            ILegacyPayloadAvailableEventImposterSetupBuilder Raise(object sender, global::System.EventArgs e);
            ILegacyPayloadAvailableEventImposterSetupBuilder OnSubscribe(global::System.Action<global::System.EventHandler> interceptor);
            ILegacyPayloadAvailableEventImposterSetupBuilder OnUnsubscribe(global::System.Action<global::System.EventHandler> interceptor);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface ILegacyPayloadAvailableEventImposterVerificationBuilder
        {
            ILegacyPayloadAvailableEventImposterVerificationBuilder Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count);
            ILegacyPayloadAvailableEventImposterVerificationBuilder Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count);
            ILegacyPayloadAvailableEventImposterVerificationBuilder Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::System.EventArgs> eCriteria, global::Imposter.Abstractions.Count count);
            ILegacyPayloadAvailableEventImposterVerificationBuilder HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler> handlerCriteria, global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal sealed class LegacyPayloadAvailableEventImposterBuilder : ILegacyPayloadAvailableEventImposterBuilder, ILegacyPayloadAvailableEventImposterSetupBuilder, ILegacyPayloadAvailableEventImposterVerificationBuilder
        {
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _handlerOrder = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler, int> _handlerCounts = new global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler, int>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _subscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _unsubscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>> _subscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>> _unsubscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::System.EventArgs e)> _history = new global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::System.EventArgs e)>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler Handler, object sender, global::System.EventArgs e)> _handlerInvocations = new global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler Handler, object sender, global::System.EventArgs e)>();
            internal LegacyPayloadAvailableEventImposterBuilder()
            {
            }

            internal void Subscribe(global::System.EventHandler handler)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerOrder.Enqueue(handler);
                _handlerCounts.AddOrUpdate(handler, 1, (_, count) => count + 1);
                _subscribeHistory.Enqueue(handler);
                foreach (var interceptor in _subscribeInterceptors)
                {
                    interceptor(handler);
                }
            }

            internal void Unsubscribe(global::System.EventHandler handler)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerCounts.AddOrUpdate(handler, 0, (_, count) =>
                {
                    if (count > 0)
                    {
                        return count - 1;
                    }

                    return 0;
                });
                _unsubscribeHistory.Enqueue(handler);
                foreach (var interceptor in _unsubscribeInterceptors)
                {
                    interceptor(handler);
                }
            }

            ILegacyPayloadAvailableEventImposterSetupBuilder ILegacyPayloadAvailableEventImposterSetupBuilder.Callback(global::System.EventHandler callback)
            {
                ArgumentNullException.ThrowIfNull(callback);
                _callbacks.Enqueue(callback);
                return this;
            }

            ILegacyPayloadAvailableEventImposterSetupBuilder ILegacyPayloadAvailableEventImposterSetupBuilder.Raise(object sender, global::System.EventArgs e)
            {
                RaiseInternal(sender, e);
                return this;
            }

            ILegacyPayloadAvailableEventImposterVerificationBuilder ILegacyPayloadAvailableEventImposterVerificationBuilder.Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _subscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _subscribeHistory)
                    {
                        if (criteria.Matches(entry))
                        {
                            performedInvocations.Add("LegacyPayloadAvailable subscribed " + FormatValue("LegacyPayloadAvailable") + " handler: " + FormatValue(entry));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            ILegacyPayloadAvailableEventImposterVerificationBuilder ILegacyPayloadAvailableEventImposterVerificationBuilder.Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _unsubscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _unsubscribeHistory)
                    {
                        if (criteria.Matches(entry))
                        {
                            performedInvocations.Add("LegacyPayloadAvailable unsubscribed " + FormatValue("LegacyPayloadAvailable") + " handler: " + FormatValue(entry));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            ILegacyPayloadAvailableEventImposterSetupBuilder ILegacyPayloadAvailableEventImposterSetupBuilder.OnSubscribe(global::System.Action<global::System.EventHandler> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _subscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            ILegacyPayloadAvailableEventImposterSetupBuilder ILegacyPayloadAvailableEventImposterSetupBuilder.OnUnsubscribe(global::System.Action<global::System.EventHandler> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _unsubscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            ILegacyPayloadAvailableEventImposterVerificationBuilder ILegacyPayloadAvailableEventImposterVerificationBuilder.Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::System.EventArgs> eCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(senderCriteria);
                ArgumentNullException.ThrowIfNull(eCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _history.Count(entry => senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _history)
                    {
                        if (senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e))
                        {
                            performedInvocations.Add("LegacyPayloadAvailable raised " + FormatValue("LegacyPayloadAvailable") + " sender: " + FormatValue(entry.sender) + " e: " + FormatValue(entry.e));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            ILegacyPayloadAvailableEventImposterVerificationBuilder ILegacyPayloadAvailableEventImposterVerificationBuilder.HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler> handlerCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(handlerCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _handlerInvocations.Count(entry => handlerCriteria.Matches(entry.Handler));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _handlerInvocations)
                    {
                        if (handlerCriteria.Matches(entry.Handler))
                        {
                            performedInvocations.Add("LegacyPayloadAvailable handler invoked " + FormatValue("LegacyPayloadAvailable") + " handler: " + FormatValue(entry.Handler) + " sender: " + FormatValue(entry.sender) + " e: " + FormatValue(entry.e));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            private void RaiseInternal(object sender, global::System.EventArgs e)
            {
                _history.Enqueue((sender, e));
                foreach (var callback in _callbacks)
                {
                    callback(sender, e);
                }

                foreach (var handler in EnumerateActiveHandlers())
                {
                    _handlerInvocations.Enqueue((handler, sender, e));
                    handler(sender, e);
                }
            }

            private global::System.Collections.Generic.IEnumerable<global::System.EventHandler> EnumerateActiveHandlers()
            {
                global::System.Collections.Generic.Dictionary<global::System.EventHandler, int> budgets = new global::System.Collections.Generic.Dictionary<global::System.EventHandler, int>(_handlerCounts);
                foreach (var handler in _handlerOrder)
                {
                    int remaining;
                    if (budgets.TryGetValue(handler, out remaining))
                    {
                        if (remaining > 0)
                        {
                            budgets[handler] = remaining - 1;
                            yield return handler;
                        }
                    }
                }
            }

            private static void EnsureCountMatches(int actual, global::Imposter.Abstractions.Count expected, global::System.Func<string> performedInvocationsFactory)
            {
                if (!expected.Matches(actual))
                {
                    throw new global::Imposter.Abstractions.VerificationFailedException(expected, actual, performedInvocationsFactory());
                }
            }

            private static string FormatValue(object? value)
            {
                return "<" + (value?.ToString() ?? "null") + ">";
            }
        }

        public IPayloadAvailableEventImposterBuilder PayloadAvailable => _PayloadAvailable;

        private readonly PayloadAvailableEventImposterBuilder _PayloadAvailable;
        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IPayloadAvailableEventImposterBuilder : IPayloadAvailableEventImposterSetupBuilder, IPayloadAvailableEventImposterVerificationBuilder
        {
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IPayloadAvailableEventImposterSetupBuilder
        {
            IPayloadAvailableEventImposterSetupBuilder Callback(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> callback);
            IPayloadAvailableEventImposterSetupBuilder Raise(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e);
            IPayloadAvailableEventImposterSetupBuilder OnSubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor);
            IPayloadAvailableEventImposterSetupBuilder OnUnsubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        public interface IPayloadAvailableEventImposterVerificationBuilder
        {
            IPayloadAvailableEventImposterVerificationBuilder Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count);
            IPayloadAvailableEventImposterVerificationBuilder Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count);
            IPayloadAvailableEventImposterVerificationBuilder Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> eCriteria, global::Imposter.Abstractions.Count count);
            IPayloadAvailableEventImposterVerificationBuilder HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> handlerCriteria, global::Imposter.Abstractions.Count count);
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        internal sealed class PayloadAvailableEventImposterBuilder : IPayloadAvailableEventImposterBuilder, IPayloadAvailableEventImposterSetupBuilder, IPayloadAvailableEventImposterVerificationBuilder
        {
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _handlerOrder = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int> _handlerCounts = new global::System.Collections.Concurrent.ConcurrentDictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _subscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _unsubscribeHistory = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>> _subscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>> _unsubscribeInterceptors = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> _callbacks = new global::System.Collections.Concurrent.ConcurrentQueue<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)> _history = new global::System.Collections.Concurrent.ConcurrentQueue<(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)>();
            private readonly global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> Handler, object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)> _handlerInvocations = new global::System.Collections.Concurrent.ConcurrentQueue<(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> Handler, object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)>();
            internal PayloadAvailableEventImposterBuilder()
            {
            }

            internal void Subscribe(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> handler)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerOrder.Enqueue(handler);
                _handlerCounts.AddOrUpdate(handler, 1, (_, count) => count + 1);
                _subscribeHistory.Enqueue(handler);
                foreach (var interceptor in _subscribeInterceptors)
                {
                    interceptor(handler);
                }
            }

            internal void Unsubscribe(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> handler)
            {
                ArgumentNullException.ThrowIfNull(handler);
                _handlerCounts.AddOrUpdate(handler, 0, (_, count) =>
                {
                    if (count > 0)
                    {
                        return count - 1;
                    }

                    return 0;
                });
                _unsubscribeHistory.Enqueue(handler);
                foreach (var interceptor in _unsubscribeInterceptors)
                {
                    interceptor(handler);
                }
            }

            IPayloadAvailableEventImposterSetupBuilder IPayloadAvailableEventImposterSetupBuilder.Callback(global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> callback)
            {
                ArgumentNullException.ThrowIfNull(callback);
                _callbacks.Enqueue(callback);
                return this;
            }

            IPayloadAvailableEventImposterSetupBuilder IPayloadAvailableEventImposterSetupBuilder.Raise(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)
            {
                RaiseInternal(sender, e);
                return this;
            }

            IPayloadAvailableEventImposterVerificationBuilder IPayloadAvailableEventImposterVerificationBuilder.Subscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _subscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _subscribeHistory)
                    {
                        if (criteria.Matches(entry))
                        {
                            performedInvocations.Add("PayloadAvailable subscribed " + FormatValue("PayloadAvailable") + " handler: " + FormatValue(entry));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            IPayloadAvailableEventImposterVerificationBuilder IPayloadAvailableEventImposterVerificationBuilder.Unsubscribed(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> criteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(criteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _unsubscribeHistory.Count(entry => criteria.Matches(entry));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _unsubscribeHistory)
                    {
                        if (criteria.Matches(entry))
                        {
                            performedInvocations.Add("PayloadAvailable unsubscribed " + FormatValue("PayloadAvailable") + " handler: " + FormatValue(entry));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            IPayloadAvailableEventImposterSetupBuilder IPayloadAvailableEventImposterSetupBuilder.OnSubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _subscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            IPayloadAvailableEventImposterSetupBuilder IPayloadAvailableEventImposterSetupBuilder.OnUnsubscribe(global::System.Action<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> interceptor)
            {
                ArgumentNullException.ThrowIfNull(interceptor);
                _unsubscribeInterceptors.Enqueue(interceptor);
                return this;
            }

            IPayloadAvailableEventImposterVerificationBuilder IPayloadAvailableEventImposterVerificationBuilder.Raised(global::Imposter.Abstractions.Arg<object> senderCriteria, global::Imposter.Abstractions.Arg<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> eCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(senderCriteria);
                ArgumentNullException.ThrowIfNull(eCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _history.Count(entry => senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _history)
                    {
                        if (senderCriteria.Matches(entry.sender) && eCriteria.Matches(entry.e))
                        {
                            performedInvocations.Add("PayloadAvailable raised " + FormatValue("PayloadAvailable") + " sender: " + FormatValue(entry.sender) + " e: " + FormatValue(entry.e));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            IPayloadAvailableEventImposterVerificationBuilder IPayloadAvailableEventImposterVerificationBuilder.HandlerInvoked(global::Imposter.Abstractions.Arg<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> handlerCriteria, global::Imposter.Abstractions.Count count)
            {
                ArgumentNullException.ThrowIfNull(handlerCriteria);
                ArgumentNullException.ThrowIfNull(count);
                int actual = _handlerInvocations.Count(entry => handlerCriteria.Matches(entry.Handler));
                EnsureCountMatches(actual, count, () =>
                {
                    var performedInvocations = new global::System.Collections.Generic.List<string>();
                    foreach (var entry in _handlerInvocations)
                    {
                        if (handlerCriteria.Matches(entry.Handler))
                        {
                            performedInvocations.Add("PayloadAvailable handler invoked " + FormatValue("PayloadAvailable") + " handler: " + FormatValue(entry.Handler) + " sender: " + FormatValue(entry.sender) + " e: " + FormatValue(entry.e));
                        }
                    }

                    return string.Join(Environment.NewLine, performedInvocations);
                });
                return this;
            }

            private void RaiseInternal(object sender, global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T> e)
            {
                _history.Enqueue((sender, e));
                foreach (var callback in _callbacks)
                {
                    callback(sender, e);
                }

                foreach (var handler in EnumerateActiveHandlers())
                {
                    _handlerInvocations.Enqueue((handler, sender, e));
                    handler(sender, e);
                }
            }

            private global::System.Collections.Generic.IEnumerable<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>> EnumerateActiveHandlers()
            {
                global::System.Collections.Generic.Dictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int> budgets = new global::System.Collections.Generic.Dictionary<global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>>, int>(_handlerCounts);
                foreach (var handler in _handlerOrder)
                {
                    int remaining;
                    if (budgets.TryGetValue(handler, out remaining))
                    {
                        if (remaining > 0)
                        {
                            budgets[handler] = remaining - 1;
                            yield return handler;
                        }
                    }
                }
            }

            private static void EnsureCountMatches(int actual, global::Imposter.Abstractions.Count expected, global::System.Func<string> performedInvocationsFactory)
            {
                if (!expected.Matches(actual))
                {
                    throw new global::Imposter.Abstractions.VerificationFailedException(expected, actual, performedInvocationsFactory());
                }
            }

            private static string FormatValue(object? value)
            {
                return "<" + (value?.ToString() ?? "null") + ">";
            }
        }

        public IHaveEventsImposter(global::Imposter.Abstractions.ImposterMode invocationBehavior = global::Imposter.Abstractions.ImposterMode.Implicit)
        {
            this._DiagnosticPayloadPublished = new DiagnosticPayloadPublishedEventImposterBuilder();
            this._LegacyPayloadAvailable = new LegacyPayloadAvailableEventImposterBuilder();
            this._PayloadAvailable = new PayloadAvailableEventImposterBuilder();
            this._imposterInstance = new ImposterTargetInstance(this);
            this._invocationBehavior = invocationBehavior;
        }

        [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
        class ImposterTargetInstance : global::Imposter.Tests.Features.OpenGenericImposter.IHaveEvents<T>
        {
            private readonly IHaveEventsImposter<T> _imposter;
            public ImposterTargetInstance(IHaveEventsImposter<T> _imposter)
            {
                this._imposter = _imposter;
            }

            public event global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> DiagnosticPayloadPublished
            {
                add
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._DiagnosticPayloadPublished.Subscribe(value);
                }

                remove
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._DiagnosticPayloadPublished.Unsubscribe(value);
                }
            }

            public event global::System.EventHandler LegacyPayloadAvailable
            {
                add
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._LegacyPayloadAvailable.Subscribe(value);
                }

                remove
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._LegacyPayloadAvailable.Unsubscribe(value);
                }
            }

            public event global::System.EventHandler<global::Imposter.Tests.Features.OpenGenericImposter.GenericEventArgs<T>> PayloadAvailable
            {
                add
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._PayloadAvailable.Subscribe(value);
                }

                remove
                {
                    ArgumentNullException.ThrowIfNull(value);
                    _imposter._PayloadAvailable.Unsubscribe(value);
                }
            }
        }
    }

    [global::System.CodeDom.Compiler.GeneratedCode("Imposter.CodeGenerator", "0.1.0.0")]
    public static class IHaveEventsImposterExtensions
    {
        extension<T>(global::Imposter.Tests.Features.OpenGenericImposter.IHaveEvents<T> imposter)
            where T : class
        {
            public static global::Imposter.Tests.Features.OpenGenericImposter.IHaveEventsImposter<T> Imposter(global::Imposter.Abstractions.ImposterMode invocationBehavior = global::Imposter.Abstractions.ImposterMode.Implicit) => new global::Imposter.Tests.Features.OpenGenericImposter.IHaveEventsImposter<T>(invocationBehavior);
        }
    }
}
#nullable restore
